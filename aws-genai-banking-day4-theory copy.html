<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS GenAI for Banking - Day 4: Lambda & Event-Driven Architecture | Great Learning</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1810 25%, #ff6b35 50%, #2d1810 75%, #000000 100%); 
            min-height: 100vh; 
            color: #ffffff;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        
        /* Great Learning Header Branding */
        .gl-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(0,0,0,0.8);
            border-radius: 12px;
            margin: 20px auto;
            max-width: 1400px;
            min-height: 70px;
            border: 2px solid #ff6b35;
        }
        .gl-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .gl-logo svg { height: 50px; }
        .gl-badge {
            background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }
        
        /* Great Learning Footer */
        .gl-footer {
            margin-top: 60px;
            padding: 40px 30px;
            background: rgba(0,0,0,0.8);
            border-radius: 12px;
            text-align: center;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            border: 2px solid #ff6b35;
        }
        .gl-footer-logo { margin-bottom: 25px; }
        .gl-copyright {
            background: rgba(0,0,0,0.6);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            color: white;
        }
        
        .slide { 
            min-height: 100vh; 
            padding: 40px 60px; 
            background: linear-gradient(135deg, #ffffff 0%, #f8f8f8 100%); 
            margin: 20px auto; 
            max-width: 1400px; 
            border-radius: 12px; 
            box-shadow: 0 20px 60px rgba(255, 107, 53, 0.3); 
            page-break-after: always; 
            color: #333;
            border: 3px solid #ff6b35;
            position: relative;
        }
        
        /* Slide Header for every slide */
        .slide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin: -40px -60px 30px -60px;
            padding: 15px 60px;
            background: rgba(255, 107, 53, 0.1);
            border-bottom: 2px solid #ff6b35;
            border-radius: 12px 12px 0 0;
        }
        .slide-header .gl-logo svg { height: 40px; }
        .slide-header .gl-badge {
            background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Slide Footer for every slide */
        .slide-footer {
            position: absolute;
            bottom: 15px;
            left: 60px;
            right: 60px;
            text-align: center;
            font-size: 0.7em;
            color: #666;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
        
        h1 { 
            color: #ff6b35; 
            font-size: 2.4em; 
            margin-bottom: 10px; 
            border-bottom: 4px solid #ff6b35; 
            padding-bottom: 15px; 
        }
        h2 { color: #2d1810; font-size: 1.6em; margin: 25px 0 15px; }
        h3 { color: #ff6b35; font-size: 1.2em; margin: 20px 0 10px; }
        h4 { color: #2d1810; font-size: 1.05em; margin-bottom: 8px; }
        .subtitle { color: #666; font-size: 1.1em; margin-bottom: 25px; }
        
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin: 20px 0; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin: 20px 0; }
        .grid-4 { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 15px; margin: 20px 0; }
        
        .card { 
            background: #f8f8f8; 
            border-radius: 8px; 
            padding: 18px; 
            border-left: 4px solid #ff6b35; 
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.1);
        }
        .card.green { border-left-color: #28a745; background: #f0fff0; }
        .card.orange { border-left-color: #ff6b35; background: #fff8f0; }
        .card.purple { border-left-color: #6f42c1; background: #f8f0ff; }
        .card.red { border-left-color: #dc3545; background: #fff0f0; }
        .card.blue { border-left-color: #007bff; background: #f0f8ff; }
        .card.aws { border-left-color: #ff9900; background: #fff9e6; }
        
        ul { margin-left: 20px; line-height: 1.7; }
        li { margin: 4px 0; }
        
        .highlight { 
            background: #ff6b35; 
            color: white; 
            padding: 3px 8px; 
            border-radius: 4px; 
            font-size: 0.85em; 
        }
        .highlight.green { background: #28a745; }
        .highlight.orange { background: #ff6b35; }
        .highlight.red { background: #dc3545; }
        .highlight.purple { background: #6f42c1; }
        .highlight.aws { background: #ff9900; }
        .highlight.blue { background: #007bff; }
        
        .time-badge { 
            background: #28a745; 
            color: white; 
            padding: 5px 12px; 
            border-radius: 20px; 
            font-size: 0.85em; 
            display: inline-block; 
            margin-bottom: 15px; 
        }
        .module-badge { 
            background: #ff6b35; 
            color: white; 
            padding: 5px 15px; 
            border-radius: 20px; 
            font-size: 0.9em; 
            display: inline-block; 
            margin-bottom: 10px; 
        }
        .day-badge { 
            background: #ff6b35; 
            color: white; 
            padding: 8px 20px; 
            border-radius: 25px; 
            font-size: 1.1em; 
            display: inline-block; 
        }
        
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 15px 0; 
            font-size: 0.95em; 
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.1);
        }
        th, td { 
            padding: 10px 12px; 
            text-align: left; 
            border-bottom: 1px solid #eee; 
        }
        th { 
            background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%); 
            color: white; 
            font-weight: 600;
        }
        tr:hover { background: #f8f8f8; }
        
        .code-block { 
            background: #1a1a1a; 
            color: #ffffff; 
            padding: 15px; 
            border-radius: 8px; 
            font-family: 'Consolas', monospace; 
            font-size: 0.85em; 
            overflow-x: auto; 
            margin: 10px 0; 
            white-space: pre-wrap; 
            border-left: 4px solid #ff6b35;
        }
        .code-block .comment { color: #6a9955; }
        .code-block .keyword { color: #ff6b35; }
        .code-block .string { color: #ce9178; }
        .code-block .function { color: #dcdcaa; }
        
        .tip-box { 
            display: flex; 
            align-items: flex-start; 
            gap: 12px; 
            padding: 15px; 
            background: linear-gradient(135deg, #e6f7ff 0%, #f0f8ff 100%); 
            border-radius: 8px; 
            margin: 10px 0; 
            border-left: 4px solid #007bff; 
        }
        .warning-box { 
            display: flex; 
            align-items: flex-start; 
            gap: 12px; 
            padding: 15px; 
            background: linear-gradient(135deg, #fff4ce 0%, #fff8e1 100%); 
            border-radius: 8px; 
            margin: 10px 0; 
            border-left: 4px solid #ff9900; 
        }
        .danger-box { 
            display: flex; 
            align-items: flex-start; 
            gap: 12px; 
            padding: 15px; 
            background: linear-gradient(135deg, #fde7e9 0%, #fff0f0 100%); 
            border-radius: 8px; 
            margin: 10px 0; 
            border-left: 4px solid #dc3545; 
        }
        .success-box { 
            display: flex; 
            align-items: flex-start; 
            gap: 12px; 
            padding: 15px; 
            background: linear-gradient(135deg, #dff6dd 0%, #f0fff0 100%); 
            border-radius: 8px; 
            margin: 10px 0; 
            border-left: 4px solid #28a745; 
        }
        .icon { font-size: 1.5em; }
        
        .banking-scenario { 
            background: linear-gradient(135deg, #2d1810 0%, #1a1a1a 100%); 
            color: white; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 15px 0; 
            border: 2px solid #ff6b35;
        }
        .banking-scenario h4 { color: #ff6b35; margin-bottom: 10px; }
        
        /* AWS Service Badges */
        .aws-badge { 
            background: #ff9900; 
            color: white; 
            padding: 4px 10px; 
            border-radius: 4px; 
            font-size: 0.8em; 
        }
        .lambda-badge { 
            background: #ff9900; 
            color: white; 
            padding: 4px 10px; 
            border-radius: 4px; 
            font-size: 0.8em; 
        }
        .s3-badge { 
            background: #28a745; 
            color: white; 
            padding: 4px 10px; 
            border-radius: 4px; 
            font-size: 0.8em; 
        }
        .stepfunctions-badge { 
            background: #6f42c1; 
            color: white; 
            padding: 4px 10px; 
            border-radius: 4px; 
            font-size: 0.8em; 
        }
        
        /* Architecture Diagrams */
        .arch-container { 
            max-width: 900px; 
            margin: 20px auto; 
            background: #f8f8f8;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #ff6b35;
        }
        .arch-layer { 
            margin: 10px 0; 
            padding: 25px; 
            border-radius: 8px; 
            position: relative; 
        }
        .arch-layer-title { 
            position: absolute; 
            top: -12px; 
            left: 20px; 
            background: white; 
            padding: 4px 15px; 
            border-radius: 20px; 
            font-weight: bold; 
            font-size: 0.85em; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
            color: #ff6b35;
        }
        .arch-services { 
            display: flex; 
            justify-content: center; 
            gap: 15px; 
            flex-wrap: wrap; 
            margin-top: 10px; 
        }
        .arch-service { 
            background: white; 
            padding: 15px 20px; 
            border-radius: 8px; 
            text-align: center; 
            min-width: 120px; 
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.1); 
            border: 1px solid #ff6b35;
        }
        .arch-service-icon { font-size: 1.8em; margin-bottom: 8px; color: #ff6b35; }
        .arch-service-name { font-weight: 600; font-size: 0.9em; color: #2d1810; }
        .arch-service-desc { font-size: 0.75em; color: #666; margin-top: 4px; }
        
        .layer-orange { background: linear-gradient(135deg, #fff8f0 0%, #ffe8d6 100%); }
        .layer-blue { background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); }
        .layer-green { background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); }
        .layer-purple { background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); }
        
        /* Pipeline Styles */
        .pipeline { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 0; 
            margin: 30px 0; 
            flex-wrap: wrap; 
        }
        .pipeline-step { 
            position: relative; 
            padding: 20px 25px; 
            min-width: 130px; 
            text-align: center; 
            color: white; 
        }
        .pipeline-step::after { 
            content: ''; 
            position: absolute; 
            right: -15px; 
            top: 50%; 
            transform: translateY(-50%); 
            border: 15px solid transparent; 
            border-left: 15px solid; 
            z-index: 1; 
        }
        .pipeline-step.orange { background: #ff6b35; }
        .pipeline-step.orange::after { border-left-color: #ff6b35; }
        .pipeline-step.aws { background: #ff9900; }
        .pipeline-step.aws::after { border-left-color: #ff9900; }
        .pipeline-step.blue { background: #007bff; }
        .pipeline-step.blue::after { border-left-color: #007bff; }
        .pipeline-step.green { background: #28a745; }
        .pipeline-step.green::after { border-left-color: #28a745; }
        .pipeline-step.purple { background: #6f42c1; }
        .pipeline-step.purple::after { border-left-color: #6f42c1; }
        .pipeline-step:last-child::after { display: none; }
        .pipeline-step small { display: block; opacity: 0.9; font-size: 0.8em; margin-top: 5px; }
        
        /* Flow Diagram Styles */
        .flow-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #ff6b35;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .flow-number {
            background: #ff6b35;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
        }
        
        .flow-content {
            flex: 1;
        }
        
        .flow-title {
            font-weight: bold;
            color: #2d1810;
            margin-bottom: 5px;
        }
        
        .flow-description {
            color: #666;
            font-size: 0.9em;
        }
        
        .flow-arrow {
            text-align: center;
            color: #ff6b35;
            font-size: 1.5em;
            margin: 10px 0;
        }
        
        @media print { 
            .slide { 
                box-shadow: none; 
                margin: 0; 
                page-break-after: always; 
                border: none;
            } 
            body { background: white; } 
        }
    </style>
</head>
<body>
<!-- Great Learning Header -->
<div class="gl-header">
    <div class="gl-logo">
        <svg width="180" height="56" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" fill-rule="evenodd">
                <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                <text x="90" y="35" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#ff6b35">Great Learning</text>
                <text x="90" y="55" font-family="Arial, sans-serif" font-size="12" fill="#666">Excellence in Education</text>
            </g>
        </svg>
    </div>
    <div style="display: flex; flex-direction: column; align-items: center; gap: 5px;">
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
        <div style="font-size: 0.7em; color: #ccc; text-align: center;">
            ¬© Great Learning. All Rights Reserved. | Proprietary content - Unauthorized use prohibited
        </div>
    </div>
</div>

<div class="container">

<!-- SLIDE 1: Day 4 Title -->
<div class="slide">
    <!-- Great Learning Header -->
    <div class="slide-header">
        <div class="gl-logo">
            <svg width="150" height="40" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                    <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                    <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                    <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                    <text x="90" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff6b35">Great Learning</text>
                    <text x="90" y="50" font-family="Arial, sans-serif" font-size="10" fill="#666">Excellence in Education</text>
                </g>
            </svg>
        </div>
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
    </div>
    
    <div style="display: flex; flex-direction: column; justify-content: center; height: 75vh; text-align: center;">
        <span class="day-badge" style="margin-bottom: 30px;">DAY 4</span>
        <p style="color: #ff6b35; font-size: 1.2em; margin-bottom: 20px;">AWS GenAI Banking Workshop Series</p>
        <h1 style="font-size: 3em; border: none; text-align: center; color: #2d1810;">Lambda & Event-Driven Architecture</h1>
        <p class="subtitle" style="font-size: 1.5em; margin: 20px 0; color: #ff6b35;">Serverless Banking Operations & Workflow Orchestration</p>
        <p style="color: #666; font-size: 1.1em; margin-top: 30px;">From Traditional Infrastructure to Event-Driven Banking</p>
        <div style="margin-top: 40px;">
            <span class="time-badge" style="font-size: 1em; padding: 12px 30px;">Full Day | 4 Hours</span>
        </div>
        <div style="margin-top: 30px;">
            <span class="highlight aws">Lambda Functions</span>
            <span class="highlight green">S3 Events</span>
            <span class="highlight purple">Step Functions</span>
            <span class="highlight blue">CloudWatch</span>
            <span class="highlight orange">Athena</span>
        </div>
        <div style="margin-top: 30px;">
            <span class="lambda-badge">AWS Lambda</span>
            <span class="s3-badge">S3 Events</span>
            <span class="stepfunctions-badge">Step Functions</span>
        </div>
        <p style="margin-top: 40px; color: #999;">Prerequisites: Days 1-3 completed - AWS Foundations, Networking & Operations</p>
    </div>
    
    <!-- Slide Footer -->
    <div class="slide-footer">
        <strong>¬© 2024 Great Learning. All Rights Reserved.</strong> | AWS GenAI Banking Workshop - Day 4 | Proprietary content - Unauthorized use prohibited
    </div>
</div>

<!-- SLIDE 2: Day 4 Detailed Agenda -->
<div class="slide">
    <!-- Great Learning Header -->
    <div class="slide-header">
        <div class="gl-logo">
            <svg width="150" height="40" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                    <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                    <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                    <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                    <text x="90" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff6b35">Great Learning</text>
                    <text x="90" y="50" font-family="Arial, sans-serif" font-size="10" fill="#666">Excellence in Education</text>
                </g>
            </svg>
        </div>
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
    </div>
    
    <h1>üìã Day 4: Detailed Session Agenda</h1>
    <p class="subtitle">Lambda & Event-Driven Architecture - 4 Hours</p>

    <h2>Session Overview</h2>
    <div class="grid-2">
        <div class="card aws">
            <h4>üéØ Learning Objectives</h4>
            <ul>
                <li>Master AWS Lambda runtime and execution models</li>
                <li>Implement event-driven banking workflows</li>
                <li>Configure S3 event triggers for document processing</li>
                <li>Build Step Functions for loan processing orchestration</li>
                <li>Optimize Lambda performance and cost efficiency</li>
            </ul>
        </div>
        <div class="card orange">
            <h4>üè¶ SecureBank Focus</h4>
            <ul>
                <li>Serverless loan document processing pipeline</li>
                <li>Real-time banking transaction processing</li>
                <li>Automated compliance reporting workflows</li>
                <li>Event-driven customer notification system</li>
                <li>Cost-effective banking operations automation</li>
            </ul>
        </div>
    </div>

    <h2>Detailed Schedule</h2>
    <table>
        <tr><th>Time</th><th>Module</th><th>Topic</th><th>Duration</th><th>Activities</th><th>Outcomes</th></tr>
        <tr>
            <td>9:00-9:10</td>
            <td><span class="highlight green">Welcome</span></td>
            <td>Day 4 Introduction</td>
            <td>10 min</td>
            <td>Day 3 Recap, Serverless Overview</td>
            <td>Context Setting</td>
        </tr>
        <tr>
            <td>9:10-10:10</td>
            <td><span class="highlight aws">Module 1</span></td>
            <td>Lambda Fundamentals</td>
            <td>60 min</td>
            <td>Runtime, Roles, Optimization, Logging</td>
            <td>Lambda Mastery</td>
        </tr>
        <tr>
            <td>10:10-10:25</td>
            <td><span class="highlight purple">Break</span></td>
            <td>Mid-Morning Break</td>
            <td>15 min</td>
            <td>Refreshment, Networking, Q&A</td>
            <td>Re-energize</td>
        </tr>
        <tr>
            <td>10:25-11:25</td>
            <td><span class="highlight green">Module 2</span></td>
            <td>S3 Event Triggers</td>
            <td>60 min</td>
            <td>Event Configuration, Document Processing</td>
            <td>Event-Driven Processing</td>
        </tr>
        <tr>
            <td>11:40-12:40</td>
            <td><span class="highlight purple">Module 3</span></td>
            <td>Step Functions Orchestration</td>
            <td>60 min</td>
            <td>State Machines, Workflow Patterns</td>
            <td>Workflow Orchestration</td>
        </tr>
        <tr>
            <td>12:40-12:55</td>
            <td><span class="highlight blue">Module 4</span></td>
            <td>Athena Integration</td>
            <td>15 min</td>
            <td>CSV Processing, Table Creation</td>
            <td>Data Analytics</td>
        </tr>
        <tr>
            <td>12:55-1:00</td>
            <td><span class="highlight orange">Wrap-up</span></td>
            <td>Session Summary</td>
            <td>5 min</td>
            <td>Key Takeaways, Next Steps</td>
            <td>Session Closure</td>
        </tr>
    </table>

    <h2>Hands-on Labs Overview</h2>
    <div class="grid-3">
        <div class="card green">
            <h4>‚ö° Lab 1: Hello World Lambda</h4>
            <ul>
                <li>Create first Lambda function</li>
                <li>Configure execution roles and permissions</li>
                <li>Review CloudWatch logs and metrics</li>
                <li>Test function with different payloads</li>
            </ul>
        </div>
        <div class="card blue">
            <h4>üìÑ Lab 2: S3 Event Processing</h4>
            <ul>
                <li>Configure S3 event triggers</li>
                <li>Process uploaded banking documents</li>
                <li>Log file names and metadata</li>
                <li>Implement error handling and retries</li>
            </ul>
        </div>
        <div class="card purple">
            <h4>üîÑ Lab 3: Step Functions Workflow</h4>
            <ul>
                <li>Build two-step Lambda workflow</li>
                <li>Upload CSV to create Athena table</li>
                <li>Orchestrate banking data processing</li>
                <li>Monitor workflow execution and errors</li>
            </ul>
        </div>
    </div>

    <h2>Prerequisites & Preparation</h2>
    <div class="grid-2">
        <div class="card purple">
            <h4>üìã Required Knowledge</h4>
            <ul>
                <li><strong>Days 1-3 Completion:</strong> AWS Foundations, VPC, EC2, CLI</li>
                <li><strong>Python/Node.js:</strong> Basic programming skills</li>
                <li><strong>JSON:</strong> Understanding of JSON structure</li>
                <li><strong>Event-Driven Concepts:</strong> Triggers and responses</li>
            </ul>
        </div>
        <div class="card red">
            <h4>üõ†Ô∏è Tools & Setup</h4>
            <ul>
                <li><strong>AWS Console:</strong> Lambda, S3, Step Functions access</li>
                <li><strong>IAM Permissions:</strong> Lambda execution roles</li>
                <li><strong>S3 Buckets:</strong> For document storage and processing</li>
                <li><strong>CloudWatch:</strong> For monitoring and logging</li>
            </ul>
        </div>
    </div>

    <h2>Banking Use Cases</h2>
    <div class="banking-scenario">
        <h4>üè¶ SecureBank Serverless Transformation</h4>
        <div class="grid-2" style="margin-top: 15px;">
            <div style="color: white;">
                <p><strong>Document Processing Pipeline:</strong></p>
                <ul>
                    <li><strong>Loan Applications:</strong> Automated document validation</li>
                    <li><strong>KYC Documents:</strong> Identity verification workflows</li>
                    <li><strong>Compliance Reports:</strong> Regulatory filing automation</li>
                    <li><strong>Transaction Records:</strong> Real-time processing</li>
                </ul>
            </div>
            <div style="color: white;">
                <p><strong>Event-Driven Operations:</strong></p>
                <ul>
                    <li><strong>Customer Onboarding:</strong> Multi-step verification</li>
                    <li><strong>Fraud Detection:</strong> Real-time transaction analysis</li>
                    <li><strong>Notification System:</strong> Multi-channel alerts</li>
                    <li><strong>Data Analytics:</strong> Automated report generation</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="success-box">
        <span class="icon">üöÄ</span>
        <div>
            <strong>Serverless Banking:</strong> By the end of today's session, you'll build event-driven banking workflows that automatically process documents, orchestrate complex business logic, and scale seamlessly to handle SecureBank's growing transaction volume.
        </div>
    </div>
    
    <!-- Slide Footer -->
    <div class="slide-footer">
        <strong>¬© 2024 Great Learning. All Rights Reserved.</strong> | AWS GenAI Banking Workshop - Day 4 | Proprietary content - Unauthorized use prohibited
    </div>
</div>
<!-- SLIDE 3: Module 1 - Lambda Fundamentals -->
<div class="slide">
    <!-- Great Learning Header -->
    <div class="slide-header">
        <div class="gl-logo">
            <svg width="150" height="40" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                    <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                    <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                    <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                    <text x="90" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff6b35">Great Learning</text>
                    <text x="90" y="50" font-family="Arial, sans-serif" font-size="10" fill="#666">Excellence in Education</text>
                </g>
            </svg>
        </div>
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
    </div>
    
    <span class="module-badge">Module 1</span>
    <span class="time-badge">60 Minutes</span>
    <h1>‚ö° Lambda Fundamentals</h1>
    <p class="subtitle">Serverless Computing for Banking Applications</p>

    <h2>AWS Lambda Architecture for Banking</h2>
    <div class="arch-container">
        <div style="text-align: center; margin-bottom: 30px;">
            <svg width="900" height="600" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
                <!-- Background -->
                <rect width="900" height="600" fill="#f8f9fa" stroke="#ff6b35" stroke-width="2" rx="10"/>
                
                <!-- Title -->
                <text x="450" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#2d1810">SecureBank Lambda Architecture</text>
                
                <!-- Event Sources Layer -->
                <rect x="50" y="60" width="800" height="100" fill="#e6f7ff" stroke="#007bff" stroke-width="2" rx="8"/>
                <text x="70" y="85" font-size="14" font-weight="bold" fill="#007bff">Event Sources & Triggers</text>
                
                <!-- S3 Events -->
                <rect x="80" y="100" width="120" height="50" fill="#ffffff" stroke="#007bff" stroke-width="1" rx="5"/>
                <text x="140" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">S3 Events</text>
                <text x="140" y="135" text-anchor="middle" font-size="9" fill="#666">Document Upload</text>
                <text x="140" y="145" text-anchor="middle" font-size="9" fill="#666">File Processing</text>
                
                <!-- API Gateway -->
                <rect x="220" y="100" width="120" height="50" fill="#ffffff" stroke="#007bff" stroke-width="1" rx="5"/>
                <text x="280" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">API Gateway</text>
                <text x="280" y="135" text-anchor="middle" font-size="9" fill="#666">REST APIs</text>
                <text x="280" y="145" text-anchor="middle" font-size="9" fill="#666">Banking Services</text>
                
                <!-- CloudWatch Events -->
                <rect x="360" y="100" width="120" height="50" fill="#ffffff" stroke="#007bff" stroke-width="1" rx="5"/>
                <text x="420" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">CloudWatch</text>
                <text x="420" y="135" text-anchor="middle" font-size="9" fill="#666">Scheduled Events</text>
                <text x="420" y="145" text-anchor="middle" font-size="9" fill="#666">Monitoring</text>
                
                <!-- SQS -->
                <rect x="500" y="100" width="120" height="50" fill="#ffffff" stroke="#007bff" stroke-width="1" rx="5"/>
                <text x="560" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">SQS Queue</text>
                <text x="560" y="135" text-anchor="middle" font-size="9" fill="#666">Message Processing</text>
                <text x="560" y="145" text-anchor="middle" font-size="9" fill="#666">Async Operations</text>
                
                <!-- DynamoDB Streams -->
                <rect x="640" y="100" width="120" height="50" fill="#ffffff" stroke="#007bff" stroke-width="1" rx="5"/>
                <text x="700" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">DynamoDB</text>
                <text x="700" y="135" text-anchor="middle" font-size="9" fill="#666">Data Changes</text>
                <text x="700" y="145" text-anchor="middle" font-size="9" fill="#666">Stream Events</text>
                
                <!-- Lambda Runtime Layer -->
                <rect x="50" y="180" width="800" height="120" fill="#fff8f0" stroke="#ff9900" stroke-width="2" rx="8"/>
                <text x="70" y="205" font-size="14" font-weight="bold" fill="#ff9900">Lambda Runtime Environment</text>
                
                <!-- Runtime -->
                <rect x="80" y="220" width="150" height="70" fill="#ffffff" stroke="#ff9900" stroke-width="1" rx="5"/>
                <text x="155" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Runtime</text>
                <text x="155" y="255" text-anchor="middle" font-size="9" fill="#666">Python 3.11</text>
                <text x="155" y="268" text-anchor="middle" font-size="9" fill="#666">Node.js 18</text>
                <text x="155" y="281" text-anchor="middle" font-size="9" fill="#666">Java 17</text>
                
                <!-- Execution Context -->
                <rect x="250" y="220" width="150" height="70" fill="#ffffff" stroke="#ff9900" stroke-width="1" rx="5"/>
                <text x="325" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Execution Context</text>
                <text x="325" y="255" text-anchor="middle" font-size="9" fill="#666">Memory: 128MB-10GB</text>
                <text x="325" y="268" text-anchor="middle" font-size="9" fill="#666">Timeout: 15 minutes</text>
                <text x="325" y="281" text-anchor="middle" font-size="9" fill="#666">Temp Storage: 10GB</text>
                
                <!-- Handler Function -->
                <rect x="420" y="220" width="150" height="70" fill="#ffffff" stroke="#ff9900" stroke-width="1" rx="5"/>
                <text x="495" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Handler Function</text>
                <text x="495" y="255" text-anchor="middle" font-size="9" fill="#666">Event Processing</text>
                <text x="495" y="268" text-anchor="middle" font-size="9" fill="#666">Business Logic</text>
                <text x="495" y="281" text-anchor="middle" font-size="9" fill="#666">Response Generation</text>
                
                <!-- IAM Role -->
                <rect x="590" y="220" width="150" height="70" fill="#ffffff" stroke="#ff9900" stroke-width="1" rx="5"/>
                <text x="665" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">IAM Execution Role</text>
                <text x="665" y="255" text-anchor="middle" font-size="9" fill="#666">Service Permissions</text>
                <text x="665" y="268" text-anchor="middle" font-size="9" fill="#666">Resource Access</text>
                <text x="665" y="281" text-anchor="middle" font-size="9" fill="#666">Security Policies</text>
                
                <!-- Banking Services Layer -->
                <rect x="50" y="320" width="800" height="100" fill="#f0fff0" stroke="#28a745" stroke-width="2" rx="8"/>
                <text x="70" y="345" font-size="14" font-weight="bold" fill="#28a745">Banking Services Integration</text>
                
                <!-- RDS -->
                <rect x="80" y="360" width="120" height="50" fill="#ffffff" stroke="#28a745" stroke-width="1" rx="5"/>
                <text x="140" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">RDS Database</text>
                <text x="140" y="395" text-anchor="middle" font-size="9" fill="#666">Customer Data</text>
                <text x="140" y="405" text-anchor="middle" font-size="9" fill="#666">Transactions</text>
                
                <!-- S3 Storage -->
                <rect x="220" y="360" width="120" height="50" fill="#ffffff" stroke="#28a745" stroke-width="1" rx="5"/>
                <text x="280" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">S3 Storage</text>
                <text x="280" y="395" text-anchor="middle" font-size="9" fill="#666">Documents</text>
                <text x="280" y="405" text-anchor="middle" font-size="9" fill="#666">Reports</text>
                
                <!-- External APIs -->
                <rect x="360" y="360" width="120" height="50" fill="#ffffff" stroke="#28a745" stroke-width="1" rx="5"/>
                <text x="420" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">External APIs</text>
                <text x="420" y="395" text-anchor="middle" font-size="9" fill="#666">Credit Bureaus</text>
                <text x="420" y="405" text-anchor="middle" font-size="9" fill="#666">Payment Gateways</text>
                
                <!-- SNS Notifications -->
                <rect x="500" y="360" width="120" height="50" fill="#ffffff" stroke="#28a745" stroke-width="1" rx="5"/>
                <text x="560" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">SNS Topics</text>
                <text x="560" y="395" text-anchor="middle" font-size="9" fill="#666">Notifications</text>
                <text x="560" y="405" text-anchor="middle" font-size="9" fill="#666">Alerts</text>
                
                <!-- CloudWatch Logs -->
                <rect x="640" y="360" width="120" height="50" fill="#ffffff" stroke="#28a745" stroke-width="1" rx="5"/>
                <text x="700" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">CloudWatch</text>
                <text x="700" y="395" text-anchor="middle" font-size="9" fill="#666">Logs & Metrics</text>
                <text x="700" y="405" text-anchor="middle" font-size="9" fill="#666">Monitoring</text>
                
                <!-- Monitoring Layer -->
                <rect x="50" y="440" width="800" height="80" fill="#fff0f0" stroke="#dc3545" stroke-width="2" rx="8"/>
                <text x="70" y="465" font-size="14" font-weight="bold" fill="#dc3545">Monitoring & Observability</text>
                
                <!-- CloudWatch Logs -->
                <rect x="80" y="480" width="150" height="30" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="155" y="500" text-anchor="middle" font-size="10" font-weight="bold" fill="#2d1810">CloudWatch Logs</text>
                
                <!-- X-Ray Tracing -->
                <rect x="250" y="480" width="150" height="30" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="325" y="500" text-anchor="middle" font-size="10" font-weight="bold" fill="#2d1810">X-Ray Tracing</text>
                
                <!-- CloudWatch Metrics -->
                <rect x="420" y="480" width="150" height="30" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="495" y="500" text-anchor="middle" font-size="10" font-weight="bold" fill="#2d1810">CloudWatch Metrics</text>
                
                <!-- Alarms -->
                <rect x="590" y="480" width="150" height="30" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="665" y="500" text-anchor="middle" font-size="10" font-weight="bold" fill="#2d1810">CloudWatch Alarms</text>
                
                <!-- Connection Lines -->
                <line x1="140" y1="150" x2="140" y2="180" stroke="#007bff" stroke-width="2"/>
                <line x1="280" y1="150" x2="280" y2="180" stroke="#007bff" stroke-width="2"/>
                <line x1="420" y1="150" x2="420" y2="180" stroke="#007bff" stroke-width="2"/>
                <line x1="560" y1="150" x2="560" y2="180" stroke="#007bff" stroke-width="2"/>
                <line x1="700" y1="150" x2="700" y2="180" stroke="#007bff" stroke-width="2"/>
                
                <line x1="155" y1="290" x2="155" y2="320" stroke="#ff9900" stroke-width="2"/>
                <line x1="325" y1="290" x2="325" y2="320" stroke="#ff9900" stroke-width="2"/>
                <line x1="495" y1="290" x2="495" y2="320" stroke="#ff9900" stroke-width="2"/>
                <line x1="665" y1="290" x2="665" y2="320" stroke="#ff9900" stroke-width="2"/>
                
                <line x1="450" y1="420" x2="450" y2="440" stroke="#28a745" stroke-width="2"/>
            </svg>
        </div>
    </div>

    <h2>Lambda Runtime & Execution Models</h2>
    <div class="banking-scenario">
        <h4>üè¶ SecureBank Lambda Strategy</h4>
        <div class="grid-2" style="margin-top: 15px;">
            <div style="color: white;">
                <p><strong>Runtime Selection:</strong></p>
                <ul>
                    <li><strong>Python 3.11:</strong> Data processing, ML inference</li>
                    <li><strong>Node.js 18:</strong> API services, real-time processing</li>
                    <li><strong>Java 17:</strong> Enterprise integration, legacy systems</li>
                    <li><strong>Custom Runtime:</strong> Specialized banking applications</li>
                </ul>
            </div>
            <div style="color: white;">
                <p><strong>Execution Patterns:</strong></p>
                <ul>
                    <li><strong>Synchronous:</strong> API Gateway, real-time responses</li>
                    <li><strong>Asynchronous:</strong> S3 events, batch processing</li>
                    <li><strong>Stream Processing:</strong> DynamoDB streams, Kinesis</li>
                    <li><strong>Scheduled:</strong> Daily reports, maintenance tasks</li>
                </ul>
            </div>
        </div>
    </div>

    <h2>Lambda Function Creation</h2>
    <div class="grid-2">
        <div class="card green">
            <h4>üîß Hello World Lambda (Python)</h4>
            <div class="code-block">
import json
import logging
from datetime import datetime

# Configure logging
logger = logging.getLogger()
logger.setLevel(logging.INFO)

def lambda_handler(event, context):
    """
    SecureBank Hello World Lambda Function
    Processes banking events and returns structured response
    """
    
    # Log the incoming event
    logger.info(f"Received event: {json.dumps(event)}")
    
    # Extract event information
    event_source = event.get('source', 'unknown')
    timestamp = datetime.utcnow().isoformat()
    
    # Banking-specific processing
    if event_source == 'banking.loan.application':
        message = "Loan application received and queued for processing"
        status = "RECEIVED"
    elif event_source == 'banking.transaction':
        message = "Transaction processed successfully"
        status = "PROCESSED"
    else:
        message = "Hello from SecureBank Lambda!"
        status = "SUCCESS"
    
    # Prepare response
    response = {
        'statusCode': 200,
        'headers': {
            'Content-Type': 'application/json',
            'X-Banking-Service': 'SecureBank-Lambda'
        },
        'body': json.dumps({
            'message': message,
            'status': status,
            'timestamp': timestamp,
            'requestId': context.aws_request_id,
            'functionName': context.function_name,
            'remainingTime': context.get_remaining_time_in_millis()
        })
    }
    
    logger.info(f"Returning response: {response}")
    return response
            </div>
        </div>
        <div class="card blue">
            <h4>üîê IAM Execution Role</h4>
            <div class="code-block">
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "lambda.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}

# Attached Policies:
# 1. AWSLambdaBasicExecutionRole (managed)
# 2. Custom Banking Policy (inline)

{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::securebank-documents/*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "rds:DescribeDBInstances"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "sns:Publish"
      ],
      "Resource": "arn:aws:sns:us-east-1:123456789012:banking-notifications"
    }
  ]
}
            </div>
        </div>
    </div>

    <h2>Performance Optimization</h2>
    <div class="flow-container">
        <div class="flow-step">
            <div class="flow-number">1</div>
            <div class="flow-content">
                <div class="flow-title">Memory Configuration (15 min)</div>
                <div class="flow-description">Optimize memory allocation based on workload requirements</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">2</div>
            <div class="flow-content">
                <div class="flow-title">Timeout Settings (15 min)</div>
                <div class="flow-description">Configure appropriate timeout values for banking operations</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">3</div>
            <div class="flow-content">
                <div class="flow-title">Cold Start Optimization (15 min)</div>
                <div class="flow-description">Minimize initialization time and improve response latency</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">4</div>
            <div class="flow-content">
                <div class="flow-title">CloudWatch Integration (15 min)</div>
                <div class="flow-description">Configure logging, metrics, and monitoring for banking compliance</div>
            </div>
        </div>
    </div>

    <h2>Lambda Configuration Best Practices</h2>
    <div class="grid-2">
        <div class="card aws">
            <h4>‚ö° Performance Tuning</h4>
            <div class="code-block">
# Memory and CPU allocation
Memory: 512 MB (for document processing)
Memory: 1024 MB (for ML inference)
Memory: 128 MB (for simple API responses)

# Timeout configuration
API Gateway: 30 seconds max
S3 Events: 5 minutes (document processing)
Scheduled Tasks: 15 minutes (reports)

# Environment Variables
ENVIRONMENT=production
LOG_LEVEL=INFO
DB_CONNECTION_POOL_SIZE=5
S3_BUCKET_NAME=securebank-documents
SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:banking-alerts

# Reserved Concurrency
Production Functions: 100 concurrent executions
Development Functions: 10 concurrent executions
            </div>
        </div>
        <div class="card orange">
            <h4>üìä CloudWatch Logging</h4>
            <div class="code-block">
import logging
import json
from datetime import datetime

# Configure structured logging for banking compliance
logger = logging.getLogger()
logger.setLevel(logging.INFO)

def log_banking_event(event_type, customer_id, amount=None, status="SUCCESS"):
    """Log banking events with structured format"""
    log_entry = {
        "timestamp": datetime.utcnow().isoformat(),
        "event_type": event_type,
        "customer_id": customer_id,
        "amount": amount,
        "status": status,
        "service": "lambda",
        "compliance": "pci-dss"
    }
    
    logger.info(json.dumps(log_entry))

# Usage in Lambda function
def lambda_handler(event, context):
    try:
        # Process banking transaction
        customer_id = event.get('customer_id')
        amount = event.get('amount')
        
        # Log transaction start
        log_banking_event("transaction_start", customer_id, amount)
        
        # Business logic here
        result = process_transaction(customer_id, amount)
        
        # Log successful completion
        log_banking_event("transaction_complete", customer_id, amount, "SUCCESS")
        
        return {
            'statusCode': 200,
            'body': json.dumps(result)
        }
        
    except Exception as e:
        # Log error with details
        log_banking_event("transaction_error", customer_id, amount, "ERROR")
        logger.error(f"Transaction failed: {str(e)}")
        raise
            </div>
        </div>
    </div>

    <h2>Banking Lambda Use Cases</h2>
    <table>
        <tr><th>Use Case</th><th>Trigger</th><th>Memory</th><th>Timeout</th><th>Concurrency</th></tr>
        <tr><td>Document Processing</td><td>S3 Upload</td><td>1024 MB</td><td>5 minutes</td><td>50</td></tr>
        <tr><td>Transaction Validation</td><td>API Gateway</td><td>512 MB</td><td>30 seconds</td><td>100</td></tr>
        <tr><td>Fraud Detection</td><td>DynamoDB Stream</td><td>2048 MB</td><td>2 minutes</td><td>25</td></tr>
        <tr><td>Daily Reports</td><td>CloudWatch Events</td><td>3008 MB</td><td>15 minutes</td><td>5</td></tr>
        <tr><td>Customer Notifications</td><td>SNS Topic</td><td>256 MB</td><td>1 minute</td><td>200</td></tr>
    </table>

    <h2>Error Handling and Retry Logic</h2>
    <div class="code-block">
import json
import boto3
from botocore.exceptions import ClientError
import time
import random

def lambda_handler(event, context):
    """
    Robust error handling for banking operations
    """
    max_retries = 3
    retry_count = 0
    
    while retry_count < max_retries:
        try:
            # Banking operation
            result = process_banking_request(event)
            
            # Log successful operation
            logger.info(f"Banking operation completed successfully: {result}")
            
            return {
                'statusCode': 200,
                'body': json.dumps({
                    'status': 'SUCCESS',
                    'result': result,
                    'retries': retry_count
                })
            }
            
        except ClientError as e:
            error_code = e.response['Error']['Code']
            
            if error_code in ['Throttling', 'ServiceUnavailable']:
                # Exponential backoff with jitter
                wait_time = (2 ** retry_count) + random.uniform(0, 1)
                logger.warning(f"Retrying in {wait_time:.2f}s due to {error_code}")
                time.sleep(wait_time)
                retry_count += 1
            else:
                # Non-retryable error
                logger.error(f"Non-retryable error: {error_code}")
                return {
                    'statusCode': 400,
                    'body': json.dumps({
                        'status': 'ERROR',
                        'error': error_code,
                        'message': str(e)
                    })
                }
        
        except Exception as e:
            logger.error(f"Unexpected error: {str(e)}")
            return {
                'statusCode': 500,
                'body': json.dumps({
                    'status': 'ERROR',
                    'message': 'Internal server error'
                })
            }
    
    # Max retries exceeded
    return {
        'statusCode': 503,
        'body': json.dumps({
            'status': 'ERROR',
            'message': 'Service temporarily unavailable'
        })
    }
    </div>

    <div class="tip-box">
        <span class="icon">üí°</span>
        <div>
            <strong>Banking Optimization:</strong> Use provisioned concurrency for critical banking functions to eliminate cold starts. Monitor costs carefully as this feature has additional charges but ensures consistent performance.
        </div>
    </div>

    <div class="success-box">
        <span class="icon">üéØ</span>
        <div>
            <strong>Lambda Mastery:</strong> SecureBank reduces infrastructure costs by 60% while improving scalability through serverless Lambda functions that automatically handle varying transaction volumes and document processing loads.
        </div>
    </div>
    
    <!-- Slide Footer -->
    <div class="slide-footer">
        <strong>¬© 2024 Great Learning. All Rights Reserved.</strong> | AWS GenAI Banking Workshop - Day 4 | Proprietary content - Unauthorized use prohibited
    </div>
</div>

<!-- SLIDE 4: Module 2 - S3 Event Triggers -->
<div class="slide">
    <!-- Great Learning Header -->
    <div class="slide-header">
        <div class="gl-logo">
            <svg width="150" height="40" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                    <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                    <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                    <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                    <text x="90" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff6b35">Great Learning</text>
                    <text x="90" y="50" font-family="Arial, sans-serif" font-size="10" fill="#666">Excellence in Education</text>
                </g>
            </svg>
        </div>
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
    </div>
    
    <span class="module-badge">Module 2</span>
    <span class="time-badge">60 Minutes</span>
    <h1>üìÑ S3 Event Triggers</h1>
    <p class="subtitle">Event-Driven Document Processing for Banking</p>

    <h2>S3 Event-Driven Architecture</h2>
    <div class="arch-container">
        <div style="text-align: center; margin-bottom: 30px;">
            <svg width="900" height="500" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Background -->
                <rect width="900" height="500" fill="#f8f9fa" stroke="#ff6b35" stroke-width="2" rx="10"/>
                
                <!-- Title -->
                <text x="450" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#2d1810">SecureBank S3 Event Processing Pipeline</text>
                
                <!-- Document Upload -->
                <rect x="50" y="60" width="150" height="80" fill="#e6f7ff" stroke="#007bff" stroke-width="2" rx="8"/>
                <text x="125" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="#007bff">Document Upload</text>
                <rect x="70" y="100" width="110" height="30" fill="#ffffff" stroke="#007bff" stroke-width="1" rx="5"/>
                <text x="125" y="120" text-anchor="middle" font-size="10" fill="#2d1810">Loan Applications</text>
                
                <!-- S3 Bucket -->
                <rect x="250" y="60" width="150" height="80" fill="#f0fff0" stroke="#28a745" stroke-width="2" rx="8"/>
                <text x="325" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="#28a745">S3 Bucket</text>
                <rect x="270" y="100" width="110" height="30" fill="#ffffff" stroke="#28a745" stroke-width="1" rx="5"/>
                <text x="325" y="120" text-anchor="middle" font-size="10" fill="#2d1810">securebank-documents</text>
                
                <!-- Event Notification -->
                <rect x="450" y="60" width="150" height="80" fill="#fff8f0" stroke="#ff9900" stroke-width="2" rx="8"/>
                <text x="525" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="#ff9900">Event Notification</text>
                <rect x="470" y="100" width="110" height="30" fill="#ffffff" stroke="#ff9900" stroke-width="1" rx="5"/>
                <text x="525" y="120" text-anchor="middle" font-size="10" fill="#2d1810">s3:ObjectCreated:*</text>
                
                <!-- Lambda Function -->
                <rect x="650" y="60" width="150" height="80" fill="#f8f0ff" stroke="#6f42c1" stroke-width="2" rx="8"/>
                <text x="725" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="#6f42c1">Lambda Function</text>
                <rect x="670" y="100" width="110" height="30" fill="#ffffff" stroke="#6f42c1" stroke-width="1" rx="5"/>
                <text x="725" y="120" text-anchor="middle" font-size="10" fill="#2d1810">Document Processor</text>
                
                <!-- Processing Steps -->
                <rect x="50" y="180" width="800" height="120" fill="#fff0f0" stroke="#dc3545" stroke-width="2" rx="8"/>
                <text x="70" y="205" font-size="14" font-weight="bold" fill="#dc3545">Document Processing Pipeline</text>
                
                <!-- Step 1: Extract Metadata -->
                <rect x="80" y="220" width="140" height="70" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="150" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Extract Metadata</text>
                <text x="150" y="255" text-anchor="middle" font-size="9" fill="#666">File Name</text>
                <text x="150" y="268" text-anchor="middle" font-size="9" fill="#666">Size & Type</text>
                <text x="150" y="281" text-anchor="middle" font-size="9" fill="#666">Upload Time</text>
                
                <!-- Step 2: Validate Document -->
                <rect x="240" y="220" width="140" height="70" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="310" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Validate Document</text>
                <text x="310" y="255" text-anchor="middle" font-size="9" fill="#666">File Format</text>
                <text x="310" y="268" text-anchor="middle" font-size="9" fill="#666">Virus Scan</text>
                <text x="310" y="281" text-anchor="middle" font-size="9" fill="#666">Content Check</text>
                
                <!-- Step 3: Process Content -->
                <rect x="400" y="220" width="140" height="70" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="470" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Process Content</text>
                <text x="470" y="255" text-anchor="middle" font-size="9" fill="#666">OCR Extraction</text>
                <text x="470" y="268" text-anchor="middle" font-size="9" fill="#666">Data Parsing</text>
                <text x="470" y="281" text-anchor="middle" font-size="9" fill="#666">Classification</text>
                
                <!-- Step 4: Store Results -->
                <rect x="560" y="220" width="140" height="70" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="630" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Store Results</text>
                <text x="630" y="255" text-anchor="middle" font-size="9" fill="#666">Database Update</text>
                <text x="630" y="268" text-anchor="middle" font-size="9" fill="#666">Index Creation</text>
                <text x="630" y="281" text-anchor="middle" font-size="9" fill="#666">Notification</text>
                
                <!-- Step 5: Trigger Workflow -->
                <rect x="720" y="220" width="140" height="70" fill="#ffffff" stroke="#dc3545" stroke-width="1" rx="5"/>
                <text x="790" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">Trigger Workflow</text>
                <text x="790" y="255" text-anchor="middle" font-size="9" fill="#666">Step Functions</text>
                <text x="790" y="268" text-anchor="middle" font-size="9" fill="#666">Next Process</text>
                <text x="790" y="281" text-anchor="middle" font-size="9" fill="#666">Human Review</text>
                
                <!-- Output Services -->
                <rect x="50" y="320" width="800" height="100" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="8"/>
                <text x="70" y="345" font-size="14" font-weight="bold" fill="#9c27b0">Output Services & Notifications</text>
                
                <!-- DynamoDB -->
                <rect x="80" y="360" width="120" height="50" fill="#ffffff" stroke="#9c27b0" stroke-width="1" rx="5"/>
                <text x="140" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">DynamoDB</text>
                <text x="140" y="395" text-anchor="middle" font-size="9" fill="#666">Document Index</text>
                <text x="140" y="405" text-anchor="middle" font-size="9" fill="#666">Metadata</text>
                
                <!-- RDS -->
                <rect x="220" y="360" width="120" height="50" fill="#ffffff" stroke="#9c27b0" stroke-width="1" rx="5"/>
                <text x="280" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">RDS Database</text>
                <text x="280" y="395" text-anchor="middle" font-size="9" fill="#666">Customer Records</text>
                <text x="280" y="405" text-anchor="middle" font-size="9" fill="#666">Loan Applications</text>
                
                <!-- SNS -->
                <rect x="360" y="360" width="120" height="50" fill="#ffffff" stroke="#9c27b0" stroke-width="1" rx="5"/>
                <text x="420" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">SNS Topics</text>
                <text x="420" y="395" text-anchor="middle" font-size="9" fill="#666">Email Alerts</text>
                <text x="420" y="405" text-anchor="middle" font-size="9" fill="#666">SMS Notifications</text>
                
                <!-- SQS -->
                <rect x="500" y="360" width="120" height="50" fill="#ffffff" stroke="#9c27b0" stroke-width="1" rx="5"/>
                <text x="560" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">SQS Queue</text>
                <text x="560" y="395" text-anchor="middle" font-size="9" fill="#666">Processing Queue</text>
                <text x="560" y="405" text-anchor="middle" font-size="9" fill="#666">Error Handling</text>
                
                <!-- CloudWatch -->
                <rect x="640" y="360" width="120" height="50" fill="#ffffff" stroke="#9c27b0" stroke-width="1" rx="5"/>
                <text x="700" y="380" text-anchor="middle" font-size="11" font-weight="bold" fill="#2d1810">CloudWatch</text>
                <text x="700" y="395" text-anchor="middle" font-size="9" fill="#666">Logs & Metrics</text>
                <text x="700" y="405" text-anchor="middle" font-size="9" fill="#666">Monitoring</text>
                
                <!-- Connection Lines -->
                <line x1="200" y1="100" x2="250" y2="100" stroke="#007bff" stroke-width="3" marker-end="url(#arrowhead)"/>
                <line x1="400" y1="100" x2="450" y2="100" stroke="#28a745" stroke-width="3" marker-end="url(#arrowhead)"/>
                <line x1="600" y1="100" x2="650" y2="100" stroke="#ff9900" stroke-width="3" marker-end="url(#arrowhead)"/>
                
                <line x1="725" y1="140" x2="725" y2="180" stroke="#6f42c1" stroke-width="3" marker-end="url(#arrowhead)"/>
                
                <line x1="220" y1="255" x2="240" y2="255" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="380" y1="255" x2="400" y2="255" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="540" y1="255" x2="560" y2="255" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="700" y1="255" x2="720" y2="255" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <line x1="450" y1="300" x2="450" y2="320" stroke="#dc3545" stroke-width="3" marker-end="url(#arrowhead)"/>
                
                <!-- Arrow marker definition -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>

    <h2>S3 Event Configuration</h2>
    <div class="banking-scenario">
        <h4>üè¶ SecureBank Document Processing Events</h4>
        <div class="grid-2" style="margin-top: 15px;">
            <div style="color: white;">
                <p><strong>Event Types:</strong></p>
                <ul>
                    <li><strong>s3:ObjectCreated:*:</strong> New document uploads</li>
                    <li><strong>s3:ObjectCreated:Put:</strong> Direct uploads</li>
                    <li><strong>s3:ObjectCreated:Post:</strong> Form-based uploads</li>
                    <li><strong>s3:ObjectRemoved:*:</strong> Document deletions</li>
                </ul>
            </div>
            <div style="color: white;">
                <p><strong>Filter Patterns:</strong></p>
                <ul>
                    <li><strong>Prefix:</strong> loans/, kyc/, statements/</li>
                    <li><strong>Suffix:</strong> .pdf, .jpg, .png, .csv</li>
                    <li><strong>Size:</strong> Files > 1KB (avoid empty files)</li>
                    <li><strong>Exclusions:</strong> temp/, .tmp files</li>
                </ul>
            </div>
        </div>
    </div>

    <h2>S3 Event Lambda Function</h2>
    <div class="code-block">
import json
import boto3
import logging
from urllib.parse import unquote_plus
from datetime import datetime

# Configure logging
logger = logging.getLogger()
logger.setLevel(logging.INFO)

# Initialize AWS clients
s3_client = boto3.client('s3')
dynamodb = boto3.resource('dynamodb')
sns_client = boto3.client('sns')

# Configuration
DOCUMENT_TABLE = 'securebank-documents'
NOTIFICATION_TOPIC = 'arn:aws:sns:us-east-1:123456789012:document-processing'

def lambda_handler(event, context):
    """
    Process S3 events for SecureBank document uploads
    """
    
    try:
        # Process each record in the event
        for record in event['Records']:
            # Extract S3 event information
            bucket_name = record['s3']['bucket']['name']
            object_key = unquote_plus(record['s3']['object']['key'])
            event_name = record['eventName']
            
            logger.info(f"Processing {event_name} for {object_key} in {bucket_name}")
            
            # Get object metadata
            try:
                response = s3_client.head_object(Bucket=bucket_name, Key=object_key)
                file_size = response['ContentLength']
                last_modified = response['LastModified']
                content_type = response.get('ContentType', 'unknown')
                
                # Extract custom metadata
                metadata = response.get('Metadata', {})
                document_type = metadata.get('document-type', 'unknown')
                customer_id = metadata.get('customer-id', 'unknown')
                
            except Exception as e:
                logger.error(f"Error getting object metadata: {str(e)}")
                continue
            
            # Process based on document type
            processing_result = process_document(
                bucket_name, object_key, document_type, 
                file_size, content_type, customer_id
            )
            
            # Store document information in DynamoDB
            store_document_info(
                object_key, bucket_name, document_type, 
                customer_id, file_size, content_type, processing_result
            )
            
            # Send notification
            send_notification(object_key, document_type, customer_id, processing_result)
            
        return {
            'statusCode': 200,
            'body': json.dumps({
                'message': f'Successfully processed {len(event["Records"])} documents',
                'timestamp': datetime.utcnow().isoformat()
            })
        }
        
    except Exception as e:
        logger.error(f"Error processing S3 event: {str(e)}")
        raise

def process_document(bucket_name, object_key, document_type, file_size, content_type, customer_id):
    """
    Process document based on type and extract relevant information
    """
    
    processing_result = {
        'status': 'PROCESSED',
        'extracted_data': {},
        'validation_errors': [],
        'processing_time': datetime.utcnow().isoformat()
    }
    
    try:
        # Validate file size (max 10MB for banking documents)
        if file_size > 10 * 1024 * 1024:
            processing_result['validation_errors'].append('File size exceeds 10MB limit')
            processing_result['status'] = 'REJECTED'
            return processing_result
        
        # Validate content type
        allowed_types = ['application/pdf', 'image/jpeg', 'image/png', 'text/csv']
        if content_type not in allowed_types:
            processing_result['validation_errors'].append(f'Unsupported file type: {content_type}')
            processing_result['status'] = 'REJECTED'
            return processing_result
        
        # Process based on document type
        if document_type == 'loan-application':
            processing_result['extracted_data'] = process_loan_application(bucket_name, object_key)
        elif document_type == 'kyc-document':
            processing_result['extracted_data'] = process_kyc_document(bucket_name, object_key)
        elif document_type == 'bank-statement':
            processing_result['extracted_data'] = process_bank_statement(bucket_name, object_key)
        else:
            processing_result['extracted_data'] = {'document_type': 'general'}
        
        logger.info(f"Document processed successfully: {object_key}")
        
    except Exception as e:
        logger.error(f"Error processing document {object_key}: {str(e)}")
        processing_result['status'] = 'ERROR'
        processing_result['validation_errors'].append(str(e))
    
    return processing_result

def process_loan_application(bucket_name, object_key):
    """
    Extract data from loan application documents
    """
    # Placeholder for actual document processing logic
    # In real implementation, this would use AWS Textract or similar service
    
    return {
        'applicant_name': 'extracted_from_document',
        'loan_amount': 'extracted_from_document',
        'income': 'extracted_from_document',
        'employment_status': 'extracted_from_document'
    }

def process_kyc_document(bucket_name, object_key):
    """
    Extract data from KYC documents
    """
    return {
        'document_id': 'extracted_from_document',
        'name': 'extracted_from_document',
        'address': 'extracted_from_document',
        'date_of_birth': 'extracted_from_document'
    }

def process_bank_statement(bucket_name, object_key):
    """
    Extract data from bank statements
    """
    return {
        'account_number': 'extracted_from_document',
        'statement_period': 'extracted_from_document',
        'balance': 'extracted_from_document',
        'transaction_count': 'extracted_from_document'
    }

def store_document_info(object_key, bucket_name, document_type, customer_id, 
                       file_size, content_type, processing_result):
    """
    Store document information in DynamoDB
    """
    try:
        table = dynamodb.Table(DOCUMENT_TABLE)
        
        item = {
            'document_id': object_key,
            'bucket_name': bucket_name,
            'document_type': document_type,
            'customer_id': customer_id,
            'file_size': file_size,
            'content_type': content_type,
            'upload_timestamp': datetime.utcnow().isoformat(),
            'processing_status': processing_result['status'],
            'extracted_data': processing_result['extracted_data'],
            'validation_errors': processing_result['validation_errors']
        }
        
        table.put_item(Item=item)
        logger.info(f"Document info stored in DynamoDB: {object_key}")
        
    except Exception as e:
        logger.error(f"Error storing document info: {str(e)}")
        raise

def send_notification(object_key, document_type, customer_id, processing_result):
    """
    Send notification about document processing
    """
    try:
        message = {
            'document_id': object_key,
            'document_type': document_type,
            'customer_id': customer_id,
            'processing_status': processing_result['status'],
            'timestamp': datetime.utcnow().isoformat()
        }
        
        sns_client.publish(
            TopicArn=NOTIFICATION_TOPIC,
            Message=json.dumps(message),
            Subject=f'Document Processing: {processing_result["status"]}'
        )
        
        logger.info(f"Notification sent for document: {object_key}")
        
    except Exception as e:
        logger.error(f"Error sending notification: {str(e)}")
        # Don't raise exception for notification failures
    </code>

    <h2>S3 Event Configuration (AWS CLI)</h2>
    <div class="grid-2">
        <div class="card green">
            <h4>üîß Event Notification Setup</h4>
            <div class="code-block">
# Create notification configuration JSON
cat > notification-config.json << EOF
{
  "LambdaConfigurations": [
    {
      "Id": "SecureBankDocumentProcessor",
      "LambdaFunctionArn": "arn:aws:lambda:us-east-1:123456789012:function:document-processor",
      "Events": ["s3:ObjectCreated:*"],
      "Filter": {
        "Key": {
          "FilterRules": [
            {
              "Name": "prefix",
              "Value": "documents/"
            },
            {
              "Name": "suffix",
              "Value": ".pdf"
            }
          ]
        }
      }
    }
  ]
}
EOF

# Apply notification configuration
aws s3api put-bucket-notification-configuration \
  --bucket securebank-documents \
  --notification-configuration file://notification-config.json

# Add Lambda permission for S3 to invoke function
aws lambda add-permission \
  --function-name document-processor \
  --principal s3.amazonaws.com \
  --action lambda:InvokeFunction \
  --source-arn arn:aws:s3:::securebank-documents \
  --statement-id s3-trigger-permission
            </div>
        </div>
        <div class="card blue">
            <h4>üìä Testing S3 Events</h4>
            <div class="code-block">
# Upload test document to trigger Lambda
aws s3 cp loan-application.pdf \
  s3://securebank-documents/documents/loans/ \
  --metadata document-type=loan-application,customer-id=CUST123456

# Check CloudWatch logs
aws logs describe-log-groups \
  --log-group-name-prefix /aws/lambda/document-processor

# Get recent log events
aws logs filter-log-events \
  --log-group-name /aws/lambda/document-processor \
  --start-time $(date -d '1 hour ago' +%s)000

# Monitor Lambda metrics
aws cloudwatch get-metric-statistics \
  --namespace AWS/Lambda \
  --metric-name Invocations \
  --dimensions Name=FunctionName,Value=document-processor \
  --start-time $(date -d '1 hour ago' --iso-8601) \
  --end-time $(date --iso-8601) \
  --period 300 \
  --statistics Sum

# Check DynamoDB for processed documents
aws dynamodb scan \
  --table-name securebank-documents \
  --filter-expression "processing_status = :status" \
  --expression-attribute-values '{":status":{"S":"PROCESSED"}}'
            </div>
        </div>
    </div>

    <h2>Banking Document Processing Workflow</h2>
    <div class="flow-container">
        <div class="flow-step">
            <div class="flow-number">1</div>
            <div class="flow-content">
                <div class="flow-title">Document Upload (15 min)</div>
                <div class="flow-description">Customer uploads loan application via web portal to S3 bucket</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">2</div>
            <div class="flow-content">
                <div class="flow-title">S3 Event Trigger (15 min)</div>
                <div class="flow-description">S3 ObjectCreated event automatically triggers Lambda function</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">3</div>
            <div class="flow-content">
                <div class="flow-title">Document Processing (15 min)</div>
                <div class="flow-description">Lambda extracts metadata, validates format, and processes content</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">4</div>
            <div class="flow-content">
                <div class="flow-title">Data Storage & Notification (15 min)</div>
                <div class="flow-description">Store results in DynamoDB and send notifications to stakeholders</div>
            </div>
        </div>
    </div>

    <h2>Error Handling and Monitoring</h2>
    <div class="grid-3">
        <div class="card aws">
            <h4>üõ°Ô∏è Error Handling</h4>
            <ul>
                <li><strong>Dead Letter Queue:</strong> Failed processing events</li>
                <li><strong>Retry Logic:</strong> Exponential backoff for transient errors</li>
                <li><strong>Error Notifications:</strong> Alert operations team</li>
                <li><strong>Graceful Degradation:</strong> Continue processing other documents</li>
            </ul>
        </div>
        <div class="card orange">
            <h4>üìä Monitoring</h4>
            <ul>
                <li><strong>CloudWatch Metrics:</strong> Invocation count, duration, errors</li>
                <li><strong>Custom Metrics:</strong> Documents processed, validation failures</li>
                <li><strong>Alarms:</strong> High error rates, processing delays</li>
                <li><strong>Dashboards:</strong> Real-time processing status</li>
            </ul>
        </div>
        <div class="card purple">
            <h4>üîí Security</h4>
            <ul>
                <li><strong>IAM Roles:</strong> Least privilege access</li>
                <li><strong>Encryption:</strong> S3 server-side encryption</li>
                <li><strong>VPC:</strong> Private subnet deployment</li>
                <li><strong>Audit Logging:</strong> All document access logged</li>
            </ul>
        </div>
    </div>

    <div class="warning-box">
        <span class="icon">‚ö†Ô∏è</span>
        <div>
            <strong>Banking Compliance:</strong> Ensure all document processing complies with financial regulations. Implement proper data retention policies, audit trails, and secure handling of sensitive customer information.
        </div>
    </div>

    <div class="success-box">
        <span class="icon">üéØ</span>
        <div>
            <strong>Event-Driven Success:</strong> SecureBank processes 10,000+ documents daily through automated S3 event triggers, reducing manual processing time by 90% while maintaining 99.9% accuracy in document classification and data extraction.
        </div>
    </div>
    
    <!-- Slide Footer -->
    <div class="slide-footer">
        <strong>¬© 2024 Great Learning. All Rights Reserved.</strong> | AWS GenAI Banking Workshop - Day 4 | Proprietary content - Unauthorized use prohibited
    </div>
</div>
<!-- SLIDE 5: Module 3 - Step Functions Orchestration -->
<div class="slide">
    <!-- Great Learning Header -->
    <div class="slide-header">
        <div class="gl-logo">
            <svg width="150" height="40" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                    <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                    <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                    <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                    <text x="90" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff6b35">Great Learning</text>
                    <text x="90" y="50" font-family="Arial, sans-serif" font-size="10" fill="#666">Excellence in Education</text>
                </g>
            </svg>
        </div>
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
    </div>
    
    <span class="module-badge">Module 3</span>
    <span class="time-badge">60 Minutes</span>
    <h1>üîÑ Step Functions Orchestration</h1>
    <p class="subtitle">Workflow Orchestration for Banking Processes</p>

    <h2>Step Functions Architecture for Banking</h2>
    <div class="arch-container">
        <div style="text-align: center; margin-bottom: 30px;">
            <svg width="900" height="600" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
                <!-- Background -->
                <rect width="900" height="600" fill="#f8f9fa" stroke="#ff6b35" stroke-width="2" rx="10"/>
                
                <!-- Title -->
                <text x="450" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#2d1810">SecureBank Loan Processing Workflow</text>
                
                <!-- Start State -->
                <circle cx="450" cy="80" r="25" fill="#28a745" stroke="#28a745" stroke-width="2"/>
                <text x="450" y="87" text-anchor="middle" font-size="12" font-weight="bold" fill="white">START</text>
                
                <!-- Step 1: Document Validation -->
                <rect x="375" y="130" width="150" height="60" fill="#e6f7ff" stroke="#007bff" stroke-width="2" rx="8"/>
                <text x="450" y="150" text-anchor="middle" font-size="12" font-weight="bold" fill="#007bff">Document Validation</text>
                <text x="450" y="165" text-anchor="middle" font-size="10" fill="#666">Lambda Function</text>
                <text x="450" y="178" text-anchor="middle" font-size="10" fill="#666">validate-documents</text>
                
                <!-- Choice State -->
                <polygon points="425,220 475,220 500,245 475,270 425,270 400,245" fill="#ff9900" stroke="#ff9900" stroke-width="2"/>
                <text x="450" y="250" text-anchor="middle" font-size="11" font-weight="bold" fill="white">Valid?</text>
                
                <!-- Step 2A: Credit Check (Valid Path) -->
                <rect x="200" y="320" width="150" height="60" fill="#f0fff0" stroke="#28a745" stroke-width="2" rx="8"/>
                <text x="275" y="340" text-anchor="middle" font-size="12" font-weight="bold" fill="#28a745">Credit Check</text>
                <text x="275" y="355" text-anchor="middle" font-size="10" fill="#666">Lambda Function</text>
                <text x="275" y="368" text-anchor="middle" font-size="10" fill="#666">credit-check</text>
                
                <!-- Step 2B: Rejection (Invalid Path) -->
                <rect x="550" y="320" width="150" height="60" fill="#fff0f0" stroke="#dc3545" stroke-width="2" rx="8"/>
                <text x="625" y="340" text-anchor="middle" font-size="12" font-weight="bold" fill="#dc3545">Reject Application</text>
                <text x="625" y="355" text-anchor="middle" font-size="10" fill="#666">Lambda Function</text>
                <text x="625" y="368" text-anchor="middle" font-size="10" fill="#666">reject-application</text>
                
                <!-- Choice State 2 -->
                <polygon points="250,410 300,410 325,435 300,460 250,460 225,435" fill="#ff9900" stroke="#ff9900" stroke-width="2"/>
                <text x="275" y="440" text-anchor="middle" font-size="11" font-weight="bold" fill="white">Approved?</text>
                
                <!-- Step 3A: Loan Approval -->
                <rect x="75" y="500" width="150" height="60" fill="#f0fff0" stroke="#28a745" stroke-width="2" rx="8"/>
                <text x="150" y="520" text-anchor="middle" font-size="12" font-weight="bold" fill="#28a745">Approve Loan</text>
                <text x="150" y="535" text-anchor="middle" font-size="10" fill="#666">Lambda Function</text>
                <text x="150" y="548" text-anchor="middle" font-size="10" fill="#666">approve-loan</text>
                
                <!-- Step 3B: Manual Review -->
                <rect x="275" y="500" width="150" height="60" fill="#fff8f0" stroke="#ff9900" stroke-width="2" rx="8"/>
                <text x="350" y="520" text-anchor="middle" font-size="12" font-weight="bold" fill="#ff9900">Manual Review</text>
                <text x="350" y="535" text-anchor="middle" font-size="10" fill="#666">Human Task</text>
                <text x="350" y="548" text-anchor="middle" font-size="10" fill="#666">loan-officer-review</text>
                
                <!-- Parallel Processing -->
                <rect x="475" y="130" width="200" height="120" fill="#f8f0ff" stroke="#6f42c1" stroke-width="2" rx="8"/>
                <text x="575" y="150" text-anchor="middle" font-size="12" font-weight="bold" fill="#6f42c1">Parallel Processing</text>
                
                <!-- Parallel Branch 1 -->
                <rect x="490" y="170" width="80" height="40" fill="#ffffff" stroke="#6f42c1" stroke-width="1" rx="5"/>
                <text x="530" y="185" text-anchor="middle" font-size="10" fill="#2d1810">Risk Analysis</text>
                <text x="530" y="198" text-anchor="middle" font-size="9" fill="#666">ML Model</text>
                
                <!-- Parallel Branch 2 -->
                <rect x="580" y="170" width="80" height="40" fill="#ffffff" stroke="#6f42c1" stroke-width="1" rx="5"/>
                <text x="620" y="185" text-anchor="middle" font-size="10" fill="#2d1810">Fraud Check</text>
                <text x="620" y="198" text-anchor="middle" font-size="9" fill="#666">External API</text>
                
                <!-- Parallel Branch 3 -->
                <rect x="490" y="220" width="80" height="40" fill="#ffffff" stroke="#6f42c1" stroke-width="1" rx="5"/>
                <text x="530" y="235" text-anchor="middle" font-size="10" fill="#2d1810">Income Verify</text>
                <text x="530" y="248" text-anchor="middle" font-size="9" fill="#666">3rd Party</text>
                
                <!-- Parallel Branch 4 -->
                <rect x="580" y="220" width="80" height="40" fill="#ffffff" stroke="#6f42c1" stroke-width="1" rx="5"/>
                <text x="620" y="235" text-anchor="middle" font-size="10" fill="#2d1810">Document OCR</text>
                <text x="620" y="248" text-anchor="middle" font-size="9" fill="#666">Textract</text>
                
                <!-- End States -->
                <circle cx="150" cy="590" r="20" fill="#28a745" stroke="#28a745" stroke-width="2"/>
                <text x="150" y="597" text-anchor="middle" font-size="10" font-weight="bold" fill="white">SUCCESS</text>
                
                <circle cx="625" cy="590" r="20" fill="#dc3545" stroke="#dc3545" stroke-width="2"/>
                <text x="625" y="597" text-anchor="middle" font-size="10" font-weight="bold" fill="white">FAILED</text>
                
                <!-- Connection Lines -->
                <line x1="450" y1="105" x2="450" y2="130" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="450" y1="190" x2="450" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Valid path -->
                <line x1="425" y1="245" x2="350" y2="320" stroke="#28a745" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="380" y="285" font-size="10" fill="#28a745">Valid</text>
                
                <!-- Invalid path -->
                <line x1="475" y1="245" x2="550" y2="320" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="520" y="285" font-size="10" fill="#dc3545">Invalid</text>
                
                <line x1="275" y1="380" x2="275" y2="410" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Approved path -->
                <line x1="250" y1="435" x2="150" y2="500" stroke="#28a745" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="190" y="470" font-size="10" fill="#28a745">Approved</text>
                
                <!-- Review path -->
                <line x1="300" y1="435" x2="350" y2="500" stroke="#ff9900" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="330" y="470" font-size="10" fill="#ff9900">Review</text>
                
                <!-- End connections -->
                <line x1="150" y1="560" x2="150" y2="570" stroke="#28a745" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="625" y1="380" x2="625" y2="570" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Arrow marker definition -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>

    <h2>Step Functions State Machine Definition</h2>
    <div class="banking-scenario">
        <h4>üè¶ SecureBank Loan Processing Workflow</h4>
        <div class="grid-2" style="margin-top: 15px;">
            <div style="color: white;">
                <p><strong>State Types:</strong></p>
                <ul>
                    <li><strong>Task:</strong> Lambda function execution</li>
                    <li><strong>Choice:</strong> Conditional branching logic</li>
                    <li><strong>Parallel:</strong> Concurrent task execution</li>
                    <li><strong>Wait:</strong> Delay for external processes</li>
                    <li><strong>Pass:</strong> Data transformation</li>
                </ul>
            </div>
            <div style="color: white;">
                <p><strong>Orchestration Patterns:</strong></p>
                <ul>
                    <li><strong>Sequential:</strong> Step-by-step processing</li>
                    <li><strong>Parallel:</strong> Concurrent validation checks</li>
                    <li><strong>Conditional:</strong> Approval/rejection logic</li>
                    <li><strong>Human-in-the-loop:</strong> Manual review tasks</li>
                    <li><strong>Error Handling:</strong> Retry and catch patterns</li>
                </ul>
            </div>
        </div>
    </div>

    <h2>Step Functions JSON Definition</h2>
    <div class="code-block">
{
  "Comment": "SecureBank Loan Processing Workflow",
  "StartAt": "ValidateDocuments",
  "States": {
    "ValidateDocuments": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:validate-documents",
      "Parameters": {
        "application_id.$": "$.application_id",
        "documents.$": "$.documents",
        "customer_id.$": "$.customer_id"
      },
      "ResultPath": "$.validation_result",
      "Next": "DocumentsValid?",
      "Retry": [
        {
          "ErrorEquals": ["Lambda.ServiceException", "Lambda.AWSLambdaException"],
          "IntervalSeconds": 2,
          "MaxAttempts": 3,
          "BackoffRate": 2.0
        }
      ],
      "Catch": [
        {
          "ErrorEquals": ["States.ALL"],
          "Next": "ValidationFailed",
          "ResultPath": "$.error"
        }
      ]
    },
    
    "DocumentsValid?": {
      "Type": "Choice",
      "Choices": [
        {
          "Variable": "$.validation_result.status",
          "StringEquals": "VALID",
          "Next": "ParallelProcessing"
        },
        {
          "Variable": "$.validation_result.status",
          "StringEquals": "INVALID",
          "Next": "RejectApplication"
        }
      ],
      "Default": "ValidationFailed"
    },
    
    "ParallelProcessing": {
      "Type": "Parallel",
      "Branches": [
        {
          "StartAt": "CreditCheck",
          "States": {
            "CreditCheck": {
              "Type": "Task",
              "Resource": "arn:aws:lambda:us-east-1:123456789012:function:credit-check",
              "Parameters": {
                "customer_id.$": "$.customer_id",
                "loan_amount.$": "$.loan_amount"
              },
              "End": true
            }
          }
        },
        {
          "StartAt": "RiskAnalysis",
          "States": {
            "RiskAnalysis": {
              "Type": "Task",
              "Resource": "arn:aws:lambda:us-east-1:123456789012:function:risk-analysis",
              "Parameters": {
                "customer_data.$": "$.customer_data",
                "loan_details.$": "$.loan_details"
              },
              "End": true
            }
          }
        },
        {
          "StartAt": "FraudCheck",
          "States": {
            "FraudCheck": {
              "Type": "Task",
              "Resource": "arn:aws:lambda:us-east-1:123456789012:function:fraud-check",
              "Parameters": {
                "customer_id.$": "$.customer_id",
                "application_data.$": "$.application_data"
              },
              "End": true
            }
          }
        },
        {
          "StartAt": "IncomeVerification",
          "States": {
            "IncomeVerification": {
              "Type": "Task",
              "Resource": "arn:aws:lambda:us-east-1:123456789012:function:income-verification",
              "Parameters": {
                "customer_id.$": "$.customer_id",
                "employment_data.$": "$.employment_data"
              },
              "End": true
            }
          }
        }
      ],
      "ResultPath": "$.parallel_results",
      "Next": "EvaluateResults"
    },
    
    "EvaluateResults": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:evaluate-results",
      "Parameters": {
        "application_id.$": "$.application_id",
        "validation_result.$": "$.validation_result",
        "parallel_results.$": "$.parallel_results"
      },
      "ResultPath": "$.evaluation",
      "Next": "LoanDecision?"
    },
    
    "LoanDecision?": {
      "Type": "Choice",
      "Choices": [
        {
          "Variable": "$.evaluation.decision",
          "StringEquals": "APPROVED",
          "Next": "ApproveLoan"
        },
        {
          "Variable": "$.evaluation.decision",
          "StringEquals": "REJECTED",
          "Next": "RejectApplication"
        },
        {
          "Variable": "$.evaluation.decision",
          "StringEquals": "MANUAL_REVIEW",
          "Next": "ManualReview"
        }
      ],
      "Default": "ManualReview"
    },
    
    "ApproveLoan": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:approve-loan",
      "Parameters": {
        "application_id.$": "$.application_id",
        "loan_amount.$": "$.loan_amount",
        "interest_rate.$": "$.evaluation.interest_rate",
        "terms.$": "$.evaluation.terms"
      },
      "ResultPath": "$.approval_result",
      "Next": "SendApprovalNotification"
    },
    
    "RejectApplication": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:reject-application",
      "Parameters": {
        "application_id.$": "$.application_id",
        "rejection_reason.$": "$.evaluation.rejection_reason"
      },
      "ResultPath": "$.rejection_result",
      "Next": "SendRejectionNotification"
    },
    
    "ManualReview": {
      "Type": "Task",
      "Resource": "arn:aws:states:::lambda:invoke.waitForTaskToken",
      "Parameters": {
        "FunctionName": "arn:aws:lambda:us-east-1:123456789012:function:manual-review-task",
        "Payload": {
          "application_id.$": "$.application_id",
          "task_token.$": "$$.Task.Token",
          "review_data.$": "$.evaluation"
        }
      },
      "ResultPath": "$.manual_review_result",
      "Next": "ProcessManualDecision",
      "TimeoutSeconds": 86400,
      "Catch": [
        {
          "ErrorEquals": ["States.Timeout"],
          "Next": "ReviewTimeout"
        }
      ]
    },
    
    "ProcessManualDecision": {
      "Type": "Choice",
      "Choices": [
        {
          "Variable": "$.manual_review_result.decision",
          "StringEquals": "APPROVED",
          "Next": "ApproveLoan"
        },
        {
          "Variable": "$.manual_review_result.decision",
          "StringEquals": "REJECTED",
          "Next": "RejectApplication"
        }
      ],
      "Default": "RejectApplication"
    },
    
    "SendApprovalNotification": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:send-notification",
      "Parameters": {
        "notification_type": "LOAN_APPROVED",
        "customer_id.$": "$.customer_id",
        "application_id.$": "$.application_id",
        "loan_details.$": "$.approval_result"
      },
      "End": true
    },
    
    "SendRejectionNotification": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:send-notification",
      "Parameters": {
        "notification_type": "LOAN_REJECTED",
        "customer_id.$": "$.customer_id",
        "application_id.$": "$.application_id",
        "rejection_details.$": "$.rejection_result"
      },
      "End": true
    },
    
    "ValidationFailed": {
      "Type": "Fail",
      "Cause": "Document validation failed",
      "Error": "ValidationError"
    },
    
    "ReviewTimeout": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:handle-timeout",
      "Parameters": {
        "application_id.$": "$.application_id",
        "timeout_reason": "Manual review timeout"
      },
      "Next": "RejectApplication"
    }
  }
}
    </code>

    <h2>Lambda Functions for Step Functions</h2>
    <div class="grid-2">
        <div class="card green">
            <h4>üîç Document Validation Function</h4>
            <div class="code-block">
import json
import boto3
import logging

logger = logging.getLogger()
logger.setLevel(logging.INFO)

def lambda_handler(event, context):
    """
    Validate loan application documents
    """
    
    try:
        application_id = event['application_id']
        documents = event['documents']
        customer_id = event['customer_id']
        
        logger.info(f"Validating documents for application {application_id}")
        
        validation_result = {
            'application_id': application_id,
            'status': 'VALID',
            'validated_documents': [],
            'validation_errors': []
        }
        
        # Validate each document
        for doc in documents:
            doc_validation = validate_document(doc)
            validation_result['validated_documents'].append(doc_validation)
            
            if not doc_validation['is_valid']:
                validation_result['status'] = 'INVALID'
                validation_result['validation_errors'].extend(
                    doc_validation['errors']
                )
        
        # Check for required documents
        required_docs = ['identity_proof', 'income_proof', 'address_proof']
        provided_doc_types = [doc['type'] for doc in documents]
        
        for required_doc in required_docs:
            if required_doc not in provided_doc_types:
                validation_result['status'] = 'INVALID'
                validation_result['validation_errors'].append(
                    f'Missing required document: {required_doc}'
                )
        
        logger.info(f"Validation result: {validation_result['status']}")
        
        return validation_result
        
    except Exception as e:
        logger.error(f"Error validating documents: {str(e)}")
        raise

def validate_document(document):
    """
    Validate individual document
    """
    
    validation = {
        'document_id': document['id'],
        'type': document['type'],
        'is_valid': True,
        'errors': []
    }
    
    # Check file size (max 10MB)
    if document.get('size', 0) > 10 * 1024 * 1024:
        validation['is_valid'] = False
        validation['errors'].append('File size exceeds 10MB limit')
    
    # Check file format
    allowed_formats = ['pdf', 'jpg', 'jpeg', 'png']
    file_format = document.get('format', '').lower()
    if file_format not in allowed_formats:
        validation['is_valid'] = False
        validation['errors'].append(f'Unsupported format: {file_format}')
    
    # Check document age (not older than 3 months)
    # Implementation would check document date
    
    return validation
            </div>
        </div>
        <div class="card blue">
            <h4>üí≥ Credit Check Function</h4>
            <div class="code-block">
import json
import boto3
import requests
import logging
from datetime import datetime

logger = logging.getLogger()
logger.setLevel(logging.INFO)

def lambda_handler(event, context):
    """
    Perform credit check for loan application
    """
    
    try:
        customer_id = event['customer_id']
        loan_amount = event['loan_amount']
        
        logger.info(f"Performing credit check for customer {customer_id}")
        
        # Get customer data from database
        customer_data = get_customer_data(customer_id)
        
        # Call external credit bureau API
        credit_report = get_credit_report(customer_data['ssn'])
        
        # Analyze credit score and history
        credit_analysis = analyze_credit_report(credit_report, loan_amount)
        
        result = {
            'customer_id': customer_id,
            'credit_score': credit_report['score'],
            'credit_grade': credit_analysis['grade'],
            'debt_to_income_ratio': credit_analysis['debt_to_income'],
            'recommendation': credit_analysis['recommendation'],
            'max_loan_amount': credit_analysis['max_loan_amount'],
            'suggested_interest_rate': credit_analysis['interest_rate'],
            'check_timestamp': datetime.utcnow().isoformat()
        }
        
        logger.info(f"Credit check completed: {result['recommendation']}")
        
        return result
        
    except Exception as e:
        logger.error(f"Error performing credit check: {str(e)}")
        raise

def get_customer_data(customer_id):
    """
    Retrieve customer data from database
    """
    # Implementation would query RDS/DynamoDB
    return {
        'customer_id': customer_id,
        'ssn': '123-45-6789',  # Encrypted in real implementation
        'annual_income': 75000,
        'employment_status': 'employed'
    }

def get_credit_report(ssn):
    """
    Call external credit bureau API
    """
    # Mock credit report - real implementation would call Experian/Equifax
    return {
        'score': 720,
        'payment_history': 'good',
        'credit_utilization': 0.25,
        'length_of_history': 8,
        'new_credit': 'low',
        'credit_mix': 'good'
    }

def analyze_credit_report(credit_report, loan_amount):
    """
    Analyze credit report and make recommendation
    """
    
    score = credit_report['score']
    
    if score >= 750:
        grade = 'A'
        interest_rate = 3.5
        max_loan_amount = 500000
        recommendation = 'APPROVE'
    elif score >= 700:
        grade = 'B'
        interest_rate = 4.5
        max_loan_amount = 300000
        recommendation = 'APPROVE'
    elif score >= 650:
        grade = 'C'
        interest_rate = 6.5
        max_loan_amount = 150000
        recommendation = 'CONDITIONAL'
    else:
        grade = 'D'
        interest_rate = 8.5
        max_loan_amount = 50000
        recommendation = 'REVIEW'
    
    return {
        'grade': grade,
        'interest_rate': interest_rate,
        'max_loan_amount': max_loan_amount,
        'recommendation': recommendation,
        'debt_to_income': credit_report.get('debt_to_income', 0.3)
    }
            </div>
        </div>
    </div>

    <h2>Step Functions Execution</h2>
    <div class="flow-container">
        <div class="flow-step">
            <div class="flow-number">1</div>
            <div class="flow-content">
                <div class="flow-title">Create State Machine (15 min)</div>
                <div class="flow-description">Define workflow JSON and create Step Functions state machine</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">2</div>
            <div class="flow-content">
                <div class="flow-title">Deploy Lambda Functions (15 min)</div>
                <div class="flow-description">Create and deploy all required Lambda functions for workflow</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">3</div>
            <div class="flow-content">
                <div class="flow-title">Test Workflow (15 min)</div>
                <div class="flow-description">Execute state machine with sample loan application data</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">4</div>
            <div class="flow-content">
                <div class="flow-title">Monitor Execution (15 min)</div>
                <div class="flow-description">Review execution history, logs, and performance metrics</div>
            </div>
        </div>
    </div>

    <h2>Step Functions CLI Commands</h2>
    <div class="grid-2">
        <div class="card aws">
            <h4>üöÄ State Machine Management</h4>
            <div class="code-block">
# Create state machine
aws stepfunctions create-state-machine \
  --name "SecureBankLoanProcessing" \
  --definition file://loan-workflow.json \
  --role-arn arn:aws:iam::123456789012:role/StepFunctionsExecutionRole

# Start execution
aws stepfunctions start-execution \
  --state-machine-arn arn:aws:states:us-east-1:123456789012:stateMachine:SecureBankLoanProcessing \
  --name "loan-app-12345" \
  --input '{
    "application_id": "APP-12345",
    "customer_id": "CUST-67890",
    "loan_amount": 250000,
    "documents": [
      {"id": "doc1", "type": "identity_proof", "format": "pdf", "size": 1024000},
      {"id": "doc2", "type": "income_proof", "format": "pdf", "size": 2048000}
    ]
  }'

# List executions
aws stepfunctions list-executions \
  --state-machine-arn arn:aws:states:us-east-1:123456789012:stateMachine:SecureBankLoanProcessing

# Get execution history
aws stepfunctions get-execution-history \
  --execution-arn arn:aws:states:us-east-1:123456789012:execution:SecureBankLoanProcessing:loan-app-12345
            </div>
        </div>
        <div class="card orange">
            <h4>üìä Monitoring & Debugging</h4>
            <div class="code-block">
# Describe state machine
aws stepfunctions describe-state-machine \
  --state-machine-arn arn:aws:states:us-east-1:123456789012:stateMachine:SecureBankLoanProcessing

# Get execution details
aws stepfunctions describe-execution \
  --execution-arn arn:aws:states:us-east-1:123456789012:execution:SecureBankLoanProcessing:loan-app-12345

# Stop execution (if needed)
aws stepfunctions stop-execution \
  --execution-arn arn:aws:states:us-east-1:123456789012:execution:SecureBankLoanProcessing:loan-app-12345 \
  --error "ManualStop" \
  --cause "Stopped for testing"

# CloudWatch metrics
aws cloudwatch get-metric-statistics \
  --namespace AWS/States \
  --metric-name ExecutionsSucceeded \
  --dimensions Name=StateMachineArn,Value=arn:aws:states:us-east-1:123456789012:stateMachine:SecureBankLoanProcessing \
  --start-time $(date -d '1 hour ago' --iso-8601) \
  --end-time $(date --iso-8601) \
  --period 300 \
  --statistics Sum

# View CloudWatch logs
aws logs filter-log-events \
  --log-group-name /aws/stepfunctions/SecureBankLoanProcessing \
  --start-time $(date -d '1 hour ago' +%s)000
            </div>
        </div>
    </div>

    <h2>Error Handling and Retry Patterns</h2>
    <div class="grid-3">
        <div class="card green">
            <h4>üîÑ Retry Strategies</h4>
            <ul>
                <li><strong>Exponential Backoff:</strong> Increasing delay between retries</li>
                <li><strong>Max Attempts:</strong> Limit retry count to prevent infinite loops</li>
                <li><strong>Error Types:</strong> Retry only on transient errors</li>
                <li><strong>Jitter:</strong> Add randomness to prevent thundering herd</li>
            </ul>
        </div>
        <div class="card blue">
            <h4>üõ°Ô∏è Error Handling</h4>
            <ul>
                <li><strong>Catch Blocks:</strong> Handle specific error types</li>
                <li><strong>Fallback States:</strong> Alternative processing paths</li>
                <li><strong>Dead Letter Queues:</strong> Store failed executions</li>
                <li><strong>Notifications:</strong> Alert on critical failures</li>
            </ul>
        </div>
        <div class="card purple">
            <h4>üìä Monitoring</h4>
            <ul>
                <li><strong>Execution History:</strong> Detailed step-by-step logs</li>
                <li><strong>CloudWatch Metrics:</strong> Success/failure rates</li>
                <li><strong>X-Ray Tracing:</strong> End-to-end request tracking</li>
                <li><strong>Custom Dashboards:</strong> Business metrics visualization</li>
            </ul>
        </div>
    </div>

    <div class="tip-box">
        <span class="icon">üí°</span>
        <div>
            <strong>Banking Workflow Tip:</strong> Use Step Functions Express Workflows for high-volume, short-duration banking operations like transaction processing. Use Standard Workflows for complex, long-running processes like loan approvals.
        </div>
    </div>

    <div class="success-box">
        <span class="icon">üéØ</span>
        <div>
            <strong>Orchestration Success:</strong> SecureBank processes 5,000+ loan applications monthly through automated Step Functions workflows, reducing processing time from 14 days to 2 hours while maintaining 99.5% accuracy in decision-making.
        </div>
    </div>
    
    <!-- Slide Footer -->
    <div class="slide-footer">
        <strong>¬© 2024 Great Learning. All Rights Reserved.</strong> | AWS GenAI Banking Workshop - Day 4 | Proprietary content - Unauthorized use prohibited
    </div>
</div>
<!-- SLIDE 6: Module 4 - Athena Integration -->
<div class="slide">
    <!-- Great Learning Header -->
    <div class="slide-header">
        <div class="gl-logo">
            <svg width="150" height="40" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                    <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                    <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                    <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                    <text x="90" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff6b35">Great Learning</text>
                    <text x="90" y="50" font-family="Arial, sans-serif" font-size="10" fill="#666">Excellence in Education</text>
                </g>
            </svg>
        </div>
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
    </div>
    
    <span class="module-badge">Module 4</span>
    <span class="time-badge">15 Minutes</span>
    <h1>üìä Athena Integration</h1>
    <p class="subtitle">Serverless Analytics for Banking Data</p>

    <h2>CSV to Athena Table Creation</h2>
    <div class="banking-scenario">
        <h4>üè¶ SecureBank Data Analytics Pipeline</h4>
        <div class="grid-2" style="margin-top: 15px;">
            <div style="color: white;">
                <p><strong>Data Sources:</strong></p>
                <ul>
                    <li><strong>Transaction Data:</strong> Daily transaction CSV files</li>
                    <li><strong>Customer Data:</strong> Account and profile information</li>
                    <li><strong>Loan Data:</strong> Application and approval records</li>
                    <li><strong>Compliance Data:</strong> Regulatory reporting files</li>
                </ul>
            </div>
            <div style="color: white;">
                <p><strong>Analytics Use Cases:</strong></p>
                <ul>
                    <li><strong>Risk Analysis:</strong> Credit risk assessment</li>
                    <li><strong>Fraud Detection:</strong> Suspicious transaction patterns</li>
                    <li><strong>Customer Insights:</strong> Behavior analysis</li>
                    <li><strong>Regulatory Reporting:</strong> Compliance dashboards</li>
                </ul>
            </div>
        </div>
    </div>

    <h2>Lambda Function for Athena Table Creation</h2>
    <div class="code-block">
import json
import boto3
import logging
import csv
from io import StringIO

logger = logging.getLogger()
logger.setLevel(logging.INFO)

# Initialize AWS clients
s3_client = boto3.client('s3')
athena_client = boto3.client('athena')

def lambda_handler(event, context):
    """
    Create Athena table from uploaded CSV file
    """
    
    try:
        # Extract S3 event information
        bucket_name = event['Records'][0]['s3']['bucket']['name']
        object_key = event['Records'][0]['s3']['object']['key']
        
        logger.info(f"Processing CSV file: {object_key}")
        
        # Download and analyze CSV file
        csv_analysis = analyze_csv_file(bucket_name, object_key)
        
        # Generate table name from file path
        table_name = generate_table_name(object_key)
        
        # Create Athena table
        create_athena_table(table_name, csv_analysis, bucket_name, object_key)
        
        return {
            'statusCode': 200,
            'body': json.dumps({
                'message': f'Successfully created Athena table: {table_name}',
                'table_name': table_name,
                'columns': len(csv_analysis['columns']),
                'location': f's3://{bucket_name}/{object_key}'
            })
        }
        
    except Exception as e:
        logger.error(f"Error processing CSV file: {str(e)}")
        raise

def analyze_csv_file(bucket_name, object_key):
    """
    Analyze CSV file structure and infer column types
    """
    
    try:
        # Download CSV file
        response = s3_client.get_object(Bucket=bucket_name, Key=object_key)
        csv_content = response['Body'].read().decode('utf-8')
        
        # Parse CSV
        csv_reader = csv.reader(StringIO(csv_content))
        headers = next(csv_reader)  # First row as headers
        
        # Sample first few rows to infer data types
        sample_rows = []
        for i, row in enumerate(csv_reader):
            if i >= 10:  # Sample first 10 rows
                break
            sample_rows.append(row)
        
        # Infer column types
        columns = []
        for i, header in enumerate(headers):
            column_name = clean_column_name(header)
            column_type = infer_column_type([row[i] for row in sample_rows if i < len(row)])
            
            columns.append({
                'name': column_name,
                'type': column_type,
                'original_name': header
            })
        
        return {
            'columns': columns,
            'row_count': len(sample_rows),
            'has_header': True
        }
        
    except Exception as e:
        logger.error(f"Error analyzing CSV file: {str(e)}")
        raise

def clean_column_name(name):
    """
    Clean column name for Athena compatibility
    """
    # Remove special characters and spaces
    clean_name = ''.join(c if c.isalnum() else '_' for c in name.lower())
    
    # Ensure it starts with a letter
    if not clean_name[0].isalpha():
        clean_name = 'col_' + clean_name
    
    return clean_name

def infer_column_type(values):
    """
    Infer column data type from sample values
    """
    
    # Remove empty values
    non_empty_values = [v for v in values if v and v.strip()]
    
    if not non_empty_values:
        return 'string'
    
    # Check if all values are integers
    try:
        for value in non_empty_values:
            int(value)
        return 'bigint'
    except ValueError:
        pass
    
    # Check if all values are floats
    try:
        for value in non_empty_values:
            float(value)
        return 'double'
    except ValueError:
        pass
    
    # Check if values look like dates
    date_patterns = ['%Y-%m-%d', '%m/%d/%Y', '%d/%m/%Y']
    for pattern in date_patterns:
        try:
            from datetime import datetime
            for value in non_empty_values[:3]:  # Check first 3 values
                datetime.strptime(value, pattern)
            return 'date'
        except ValueError:
            continue
    
    # Default to string
    return 'string'

def generate_table_name(object_key):
    """
    Generate Athena table name from S3 object key
    """
    
    # Extract filename without extension
    filename = object_key.split('/')[-1]
    table_name = filename.split('.')[0]
    
    # Clean table name
    table_name = ''.join(c if c.isalnum() else '_' for c in table_name.lower())
    
    # Add prefix for banking tables
    return f'securebank_{table_name}'

def create_athena_table(table_name, csv_analysis, bucket_name, object_key):
    """
    Create Athena table with inferred schema
    """
    
    try:
        # Build column definitions
        column_definitions = []
        for col in csv_analysis['columns']:
            column_definitions.append(f"`{col['name']}` {col['type']}")
        
        columns_sql = ',\n  '.join(column_definitions)
        
        # Get S3 location (directory containing the file)
        s3_location = f"s3://{bucket_name}/{'/'.join(object_key.split('/')[:-1])}/"
        
        # Create table SQL
        create_table_sql = f"""
        CREATE EXTERNAL TABLE IF NOT EXISTS `securebank_db`.`{table_name}` (
          {columns_sql}
        )
        ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe'
        WITH SERDEPROPERTIES (
          'serialization.format' = ',',
          'field.delim' = ','
        )
        LOCATION '{s3_location}'
        TBLPROPERTIES (
          'has_encrypted_data'='false',
          'skip.header.line.count'='1'
        )
        """
        
        # Execute query
        query_execution_id = athena_client.start_query_execution(
            QueryString=create_table_sql,
            ResultConfiguration={
                'OutputLocation': f's3://{bucket_name}/athena-results/'
            },
            WorkGroup='primary'
        )['QueryExecutionId']
        
        logger.info(f"Created Athena table {table_name}, Query ID: {query_execution_id}")
        
        return query_execution_id
        
    except Exception as e:
        logger.error(f"Error creating Athena table: {str(e)}")
        raise
    </code>

    <h2>Sample Banking Data Analysis</h2>
    <div class="grid-2">
        <div class="card green">
            <h4>üìà Transaction Analysis Queries</h4>
            <div class="code-block">
-- Daily transaction volume
SELECT 
    DATE(transaction_date) as date,
    COUNT(*) as transaction_count,
    SUM(amount) as total_amount,
    AVG(amount) as avg_amount
FROM securebank_transactions
WHERE transaction_date >= DATE('2024-01-01')
GROUP BY DATE(transaction_date)
ORDER BY date DESC;

-- Top customers by transaction volume
SELECT 
    customer_id,
    COUNT(*) as transaction_count,
    SUM(amount) as total_amount,
    MAX(amount) as max_transaction
FROM securebank_transactions
WHERE transaction_date >= DATE('2024-01-01')
GROUP BY customer_id
ORDER BY total_amount DESC
LIMIT 100;

-- Fraud detection - unusual patterns
SELECT 
    customer_id,
    transaction_date,
    amount,
    merchant_category,
    COUNT(*) OVER (
        PARTITION BY customer_id 
        ORDER BY transaction_date 
        RANGE BETWEEN INTERVAL '1' HOUR PRECEDING AND CURRENT ROW
    ) as transactions_last_hour
FROM securebank_transactions
WHERE transactions_last_hour > 10;
            </div>
        </div>
        <div class="card blue">
            <h4>üè¶ Loan Performance Analysis</h4>
            <div class="code-block">
-- Loan approval rates by credit score
SELECT 
    CASE 
        WHEN credit_score >= 750 THEN 'Excellent (750+)'
        WHEN credit_score >= 700 THEN 'Good (700-749)'
        WHEN credit_score >= 650 THEN 'Fair (650-699)'
        ELSE 'Poor (<650)'
    END as credit_category,
    COUNT(*) as applications,
    SUM(CASE WHEN status = 'APPROVED' THEN 1 ELSE 0 END) as approved,
    ROUND(
        100.0 * SUM(CASE WHEN status = 'APPROVED' THEN 1 ELSE 0 END) / COUNT(*), 
        2
    ) as approval_rate
FROM securebank_loan_applications
GROUP BY credit_category
ORDER BY MIN(credit_score) DESC;

-- Monthly loan origination trends
SELECT 
    DATE_TRUNC('month', application_date) as month,
    COUNT(*) as applications,
    SUM(CASE WHEN status = 'APPROVED' THEN loan_amount ELSE 0 END) as approved_amount,
    AVG(CASE WHEN status = 'APPROVED' THEN processing_days ELSE NULL END) as avg_processing_days
FROM securebank_loan_applications
WHERE application_date >= DATE('2024-01-01')
GROUP BY DATE_TRUNC('month', application_date)
ORDER BY month;
            </div>
        </div>
    </div>

    <div class="success-box">
        <span class="icon">üéØ</span>
        <div>
            <strong>Analytics Success:</strong> SecureBank analyzes 1TB+ of banking data monthly using serverless Athena queries, enabling real-time insights for risk management, fraud detection, and regulatory reporting at 90% lower cost than traditional data warehouses.
        </div>
    </div>
    
    <!-- Slide Footer -->
    <div class="slide-footer">
        <strong>¬© 2024 Great Learning. All Rights Reserved.</strong> | AWS GenAI Banking Workshop - Day 4 | Proprietary content - Unauthorized use prohibited
    </div>
</div>
<!-- SLIDE 7: Day 4 Summary & Next Steps -->
<div class="slide">
    <!-- Great Learning Header -->
    <div class="slide-header">
        <div class="gl-logo">
            <svg width="150" height="40" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                    <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                    <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                    <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                    <text x="90" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff6b35">Great Learning</text>
                    <text x="90" y="50" font-family="Arial, sans-serif" font-size="10" fill="#666">Excellence in Education</text>
                </g>
            </svg>
        </div>
        <div class="gl-badge">AWS GenAI Banking Workshop</div>
    </div>
    
    <h1>üéØ Day 4 Summary & Key Takeaways</h1>
    <p class="subtitle">Lambda & Event-Driven Architecture Mastery Achieved</p>

    <h2>What We Accomplished Today</h2>
    <div class="grid-2">
        <div class="card green">
            <h4>‚úÖ Technical Skills Mastered</h4>
            <ul>
                <li><strong>Lambda Functions:</strong> Serverless computing and optimization</li>
                <li><strong>S3 Event Triggers:</strong> Event-driven document processing</li>
                <li><strong>Step Functions:</strong> Workflow orchestration and state machines</li>
                <li><strong>Athena Integration:</strong> Serverless analytics and data processing</li>
                <li><strong>Banking Workflows:</strong> End-to-end loan processing automation</li>
            </ul>
        </div>
        <div class="card blue">
            <h4>üè¶ Banking Applications</h4>
            <ul>
                <li><strong>Document Processing:</strong> Automated loan application handling</li>
                <li><strong>Workflow Orchestration:</strong> Complex multi-step business processes</li>
                <li><strong>Real-time Analytics:</strong> Instant insights from banking data</li>
                <li><strong>Cost Optimization:</strong> 70% reduction in infrastructure costs</li>
                <li><strong>Scalability:</strong> Handle 10x transaction volume automatically</li>
            </ul>
        </div>
    </div>

    <h2>SecureBank Serverless Transformation</h2>
    <div class="arch-container">
        <div style="text-align: center; margin-bottom: 20px;">
            <h3 style="color: #ff6b35; margin-bottom: 15px;">4-Day Journey: From Traditional to Serverless Banking</h3>
        </div>
        
        <div class="pipeline">
            <div class="pipeline-step orange">
                <strong>Day 1</strong>
                <small>AWS Foundations</small>
            </div>
            <div class="pipeline-step aws">
                <strong>Day 2</strong>
                <small>VPC & Networking</small>
            </div>
            <div class="pipeline-step blue">
                <strong>Day 3</strong>
                <small>Operations & Monitoring</small>
            </div>
            <div class="pipeline-step purple">
                <strong>Day 4</strong>
                <small>Serverless & Events</small>
            </div>
        </div>
        
        <div class="grid-3" style="margin-top: 30px;">
            <div class="card aws">
                <h4>‚ö° Serverless Metrics</h4>
                <ul>
                    <li><strong>Cost Reduction:</strong> 70% infrastructure savings</li>
                    <li><strong>Scalability:</strong> Auto-scale to 10,000+ requests/sec</li>
                    <li><strong>Availability:</strong> 99.99% uptime achieved</li>
                    <li><strong>Processing Speed:</strong> 95% faster document processing</li>
                </ul>
            </div>
            <div class="card orange">
                <h4>üîÑ Workflow Automation</h4>
                <ul>
                    <li><strong>Loan Processing:</strong> 14 days ‚Üí 2 hours</li>
                    <li><strong>Document Validation:</strong> 100% automated</li>
                    <li><strong>Approval Workflow:</strong> 90% straight-through processing</li>
                    <li><strong>Error Handling:</strong> Automatic retry and recovery</li>
                </ul>
            </div>
            <div class="card green">
                <h4>üìä Analytics Capabilities</h4>
                <ul>
                    <li><strong>Real-time Insights:</strong> Instant data analysis</li>
                    <li><strong>Cost Efficiency:</strong> 90% lower than traditional DW</li>
                    <li><strong>Query Performance:</strong> Sub-second response times</li>
                    <li><strong>Data Volume:</strong> Process 1TB+ monthly</li>
                </ul>
            </div>
        </div>
    </div>

    <h2>Hands-on Labs Completed</h2>
    <table>
        <tr><th>Lab</th><th>Objective</th><th>Skills Gained</th><th>Banking Application</th></tr>
        <tr>
            <td><span class="highlight green">Lab 1: Hello World Lambda</span></td>
            <td>Create and deploy Lambda functions</td>
            <td>Serverless computing, IAM roles, logging</td>
            <td>Banking API services foundation</td>
        </tr>
        <tr>
            <td><span class="highlight blue">Lab 2: S3 Event Processing</span></td>
            <td>Event-driven document processing</td>
            <td>S3 triggers, metadata extraction, notifications</td>
            <td>Automated loan document processing</td>
        </tr>
        <tr>
            <td><span class="highlight purple">Lab 3: Step Functions Workflow</span></td>
            <td>Multi-step workflow orchestration</td>
            <td>State machines, parallel processing, error handling</td>
            <td>Complete loan approval workflow</td>
        </tr>
        <tr>
            <td><span class="highlight orange">Lab 4: Athena Analytics</span></td>
            <td>Serverless data analytics</td>
            <td>CSV processing, table creation, SQL queries</td>
            <td>Banking data insights and reporting</td>
        </tr>
    </table>

    <h2>Key Learning Outcomes</h2>
    <div class="flow-container">
        <div class="flow-step">
            <div class="flow-number">1</div>
            <div class="flow-content">
                <div class="flow-title">Serverless Mastery</div>
                <div class="flow-description">Master Lambda functions, execution models, and performance optimization for banking workloads</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">2</div>
            <div class="flow-content">
                <div class="flow-title">Event-Driven Architecture</div>
                <div class="flow-description">Implement S3 event triggers and build reactive banking document processing systems</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">3</div>
            <div class="flow-content">
                <div class="flow-title">Workflow Orchestration</div>
                <div class="flow-description">Design and deploy complex multi-step banking workflows using Step Functions</div>
            </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-step">
            <div class="flow-number">4</div>
            <div class="flow-content">
                <div class="flow-title">Serverless Analytics</div>
                <div class="flow-description">Build cost-effective data analytics solutions for banking insights and reporting</div>
            </div>
        </div>
    </div>

    <h2>Next Steps: Advanced Banking Solutions</h2>
    <div class="banking-scenario">
        <h4>üöÄ Continuing Your Serverless Banking Journey</h4>
        <div class="grid-2" style="margin-top: 15px;">
            <div style="color: white;">
                <p><strong>Advanced Topics to Explore:</strong></p>
                <ul>
                    <li><strong>API Gateway:</strong> Secure banking API management</li>
                    <li><strong>DynamoDB:</strong> NoSQL for real-time banking data</li>
                    <li><strong>SQS/SNS:</strong> Messaging and notification systems</li>
                    <li><strong>EventBridge:</strong> Event-driven microservices</li>
                    <li><strong>AI/ML Services:</strong> Bedrock, Textract, Comprehend</li>
                </ul>
            </div>
            <div style="color: white;">
                <p><strong>Production Considerations:</strong></p>
                <ul>
                    <li><strong>Security:</strong> VPC, encryption, IAM best practices</li>
                    <li><strong>Monitoring:</strong> X-Ray tracing, CloudWatch insights</li>
                    <li><strong>Cost Optimization:</strong> Reserved capacity, right-sizing</li>
                    <li><strong>Compliance:</strong> Audit trails, data governance</li>
                    <li><strong>Disaster Recovery:</strong> Multi-region deployment</li>
                </ul>
            </div>
        </div>
    </div>

    <h2>Recommended Actions</h2>
    <div class="grid-3">
        <div class="card green">
            <h4>üìö Continue Learning</h4>
            <ul>
                <li><strong>Practice:</strong> Build more complex serverless applications</li>
                <li><strong>Explore:</strong> AWS Serverless Application Model (SAM)</li>
                <li><strong>Study:</strong> Serverless design patterns and best practices</li>
                <li><strong>Experiment:</strong> Try different Lambda runtimes and triggers</li>
            </ul>
        </div>
        <div class="card blue">
            <h4>üîß Hands-on Practice</h4>
            <ul>
                <li><strong>Build Projects:</strong> Create end-to-end serverless applications</li>
                <li><strong>Optimize Performance:</strong> Fine-tune memory and timeout settings</li>
                <li><strong>Implement Monitoring:</strong> Set up comprehensive observability</li>
                <li><strong>Test Scenarios:</strong> Practice error handling and recovery</li>
            </ul>
        </div>
        <div class="card purple">
            <h4>üè¶ Banking Applications</h4>
            <ul>
                <li><strong>Expand Workflows:</strong> Add more complex business logic</li>
                <li><strong>Integrate AI/ML:</strong> Add intelligent document processing</li>
                <li><strong>Scale Solutions:</strong> Prepare for production workloads</li>
                <li><strong>Ensure Compliance:</strong> Implement banking regulations</li>
            </ul>
        </div>
    </div>

    <div class="success-box">
        <span class="icon">üéâ</span>
        <div>
            <strong>Congratulations!</strong> You've successfully completed Day 4 of the AWS GenAI Banking Workshop. You now have the skills to build scalable, cost-effective, event-driven banking applications using serverless technologies that can handle enterprise-scale workloads.
        </div>
    </div>

    <div style="text-align: center; margin-top: 40px;">
        <h2 style="color: #ff6b35;">Thank You!</h2>
        <p style="font-size: 1.2em; color: #666; margin: 20px 0;">Questions & Discussion</p>
        <div style="margin-top: 30px;">
            <span class="highlight green">Serverless Banking</span>
            <span class="highlight blue">Event-Driven Architecture</span>
            <span class="highlight orange">Workflow Orchestration</span>
            <span class="highlight purple">Analytics & Insights</span>
        </div>
        <p style="margin-top: 30px; color: #999;">Ready to transform banking with serverless technologies!</p>
    </div>
    
    <!-- Slide Footer -->
    <div class="slide-footer">
        <strong>¬© 2024 Great Learning. All Rights Reserved.</strong> | AWS GenAI Banking Workshop - Day 4 | Proprietary content - Unauthorized use prohibited
    </div>
</div>

</div>

<!-- Great Learning Footer -->
<div class="gl-footer">
    <div class="gl-footer-logo">
        <svg width="200" height="62" viewBox="0 0 257 80" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" fill-rule="evenodd">
                <path d="M38.68 72.21l.208-.247 8.42-10.38H36.104c-14.048 0-25.478-11.43-25.478-25.478 0-14.05 11.43-25.479 25.478-25.479h13.088L57.899 0H36.104C16.196 0 0 16.197 0 36.105 0 56.013 16.196 72.21 36.104 72.21h2.577z" fill="#ff6b35"/>
                <path d="M0 36.105C0 45.29 3.453 53.68 9.122 60.059l6.823-8.401a25.343 25.343 0 01-5.319-15.553c0-14.05 11.43-25.479 25.478-25.479H49.27L57.9 0H36.104C16.196 0 0 16.196 0 36.105" fill="#ff8c42"/>
                <path fill="#ff6b35" d="M47.307 61.583l10.626-13.099v-18.90H35.359L26.75 41.022h20.556z"/>
                <text x="90" y="35" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#ff6b35">Great Learning</text>
                <text x="90" y="55" font-family="Arial, sans-serif" font-size="12" fill="#666">Excellence in Education</text>
            </g>
        </svg>
    </div>
    
    <div class="gl-copyright">
        <h3 style="color: #ff6b35; margin-bottom: 15px;">AWS GenAI Banking Workshop - Day 4 Complete</h3>
        <p style="margin-bottom: 10px;"><strong>Lambda & Event-Driven Architecture</strong></p>
        <p style="margin-bottom: 15px;">Comprehensive training on serverless computing, workflow orchestration, and event-driven banking solutions</p>
        <p style="font-size: 0.9em; color: #ccc;">
            <strong>¬© 2024 Great Learning. All Rights Reserved.</strong><br>
            This content is proprietary and confidential. Unauthorized reproduction, distribution, or use is strictly prohibited.<br>
            For questions or support, contact: <strong>support@greatlearning.in</strong>
        </p>
    </div>
</div>

</body>
</html>